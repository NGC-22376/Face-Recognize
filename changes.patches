diff --git a/back_end/models.py b/back_end/models.py
index 7590d62..8068b22 100644
--- a/back_end/models.py
+++ b/back_end/models.py
@@ -1,11 +1,8 @@
 from app import db
-from datetime import datetime
-
-
 
 
 class User(db.Model):
-    __tablename__ = 'user'
+    __tablename__ = "user"
     user_id = db.Column(db.Integer, primary_key=True, autoincrement=True)
     account = db.Column(db.String(255))
     name = db.Column(db.String(255))
@@ -14,11 +11,17 @@ class User(db.Model):
 
     # æ·»åŠ å®‰å…¨é—®é¢˜å’Œç­”æ¡ˆå­—æ®µ
     security_question_1 = db.Column(db.String(255), nullable=True)
-    security_answer_1 = db.Column(db.String(255), nullable=True, comment='å“ˆå¸Œåçš„å¯†ä¿ç­”æ¡ˆ1')
+    security_answer_1 = db.Column(
+        db.String(255), nullable=True, comment="å“ˆå¸Œåçš„å¯†ä¿ç­”æ¡ˆ1"
+    )
     security_question_2 = db.Column(db.String(255), nullable=True)
-    security_answer_2 = db.Column(db.String(255), nullable=True, comment='å“ˆå¸Œåçš„å¯†ä¿ç­”æ¡ˆ2')
+    security_answer_2 = db.Column(
+        db.String(255), nullable=True, comment="å“ˆå¸Œåçš„å¯†ä¿ç­”æ¡ˆ2"
+    )
     security_question_3 = db.Column(db.String(255), nullable=True)
-    security_answer_3 = db.Column(db.String(255), nullable=True, comment='å“ˆå¸Œåçš„å¯†ä¿ç­”æ¡ˆ3')
+    security_answer_3 = db.Column(
+        db.String(255), nullable=True, comment="å“ˆå¸Œåçš„å¯†ä¿ç­”æ¡ˆ3"
+    )
 
     # å…³è”å…³ç³»
     faces = db.relationship("Face", backref="user", cascade="all, delete-orphan")
@@ -28,39 +31,58 @@ class User(db.Model):
     # è¯·å‡ç”³è¯·å…³è”
     absences = db.relationship("Absence", backref="user", cascade="all, delete-orphan")
     # äººè„¸å®¡æ ¸è¡¨
-    face_enrollment=db.relationship("FaceEnrollment", backref="user", cascade="all, delete-orphan")
+    face_enrollment = db.relationship(
+        "FaceEnrollment", backref="user", cascade="all, delete-orphan"
+    )
 
 
 class Face(db.Model):
-    __tablename__ = 'face'
-    rec_id = db.Column(db.Integer, primary_key=True)
-    user_id = db.Column(db.Integer, db.ForeignKey('user.user_id', ondelete='CASCADE'))
+    __tablename__ = "face"
+    rec_id = db.Column(db.Integer, primary_key=True, autoincrement=True)
+    user_id = db.Column(
+        db.Integer,
+        db.ForeignKey("user.user_id", ondelete="CASCADE", onupdate="CASCADE"),
+    )
     image_path = db.Column(db.String(255))
-    rec_time = db.Column(db.DateTime, default=datetime.utcnow)
-    result = db.Column(db.String(50))
+    rec_time = db.Column(db.DateTime)
+    result = db.Column(db.String(255))  # è¯†åˆ«ç»“æœï¼Œå¦‚æˆåŠŸï¼Œå¤±è´¥ï¼Œå¼‚å¸¸
+
 
 class Attendance(db.Model):
-    __tablename__ = 'attendance'
-    attendance_id = db.Column(db.Integer, primary_key=True)
-    user_id = db.Column(db.Integer, db.ForeignKey('user.user_id', ondelete='CASCADE'))
-    clock_in_time = db.Column(db.DateTime, nullable=True)
-    clock_out_time = db.Column(db.DateTime, nullable=True)
-    status = db.Column(db.String(50))
+    __tablename__ = "attendance"
+    attendance_id = db.Column(db.Integer, primary_key=True, autoincrement=True)
+    user_id = db.Column(
+        db.Integer,
+        db.ForeignKey("user.user_id", ondelete="CASCADE", onupdate="CASCADE"),
+    )
+    clock_in_time = db.Column(db.DateTime)  # ä¸Šç­æ—¶é—´
+    clock_out_time = db.Column(db.DateTime)  # ä¸‹ç­æ—¶é—´
+    status = db.Column(db.String(255))  # çŠ¶æ€ï¼Œå¦‚è¿Ÿåˆ°ï¼Œæ—©é€€ï¼Œæ­£å¸¸
 
+
+# è¯·å‡è¡¨
 class Absence(db.Model):
-    __tablename__ = 'absence'
-    id = db.Column(db.Integer, primary_key=True)
-    user_id = db.Column(db.Integer, db.ForeignKey('user.user_id', ondelete='CASCADE'), nullable=False)
+    __tablename__ = "absence"
+    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
+    user_id = db.Column(
+        db.Integer,
+        db.ForeignKey("user.user_id", ondelete="CASCADE", onupdate="CASCADE"),
+        nullable=False,
+    )
     start_time = db.Column(db.DateTime, nullable=False)
     end_time = db.Column(db.DateTime, nullable=False)
-    status = db.Column(db.Integer, nullable=False, default=0, comment='0:æœªå®¡æ‰¹, 1:å·²æ‹’ç», 2:å·²é€šè¿‡')
+    status = db.Column(
+        db.Integer, nullable=False, default=0, comment="0:æœªå®¡æ‰¹, 1:å·²æ‹’ç», 2:å·²é€šè¿‡"
+    )
     reason = db.Column(db.Text, nullable=False)
-    absence_type = db.Column(db.Integer, nullable=False, default=0)  # 0ç—…å‡ 1ç§äº‹è¯·å‡ 2å…¬äº‹è¯·å‡
+    absence_type = db.Column(
+        db.Integer, nullable=False, default=0
+    )  # 0ç—…å‡ 1ç§äº‹è¯·å‡ 2å…¬äº‹è¯·å‡
 
 
-#äººè„¸å½•å…¥å®¡æ ¸è¡¨
+# äººè„¸å½•å…¥å®¡æ ¸è¡¨
 class FaceEnrollment(db.Model):
-    __tablename__ = 'face_enrollment'
+    __tablename__ = "face_enrollment"
     id = db.Column(db.Integer, primary_key=True, autoincrement=True)
     user_id = db.Column(
         db.Integer,
@@ -71,4 +93,4 @@ class FaceEnrollment(db.Model):
     status = db.Column(db.Integer, default=0)  # 0:å¾…å®¡æ ¸, 1:é€šè¿‡, 2:æ‹’ç»
     created_time = db.Column(db.DateTime)
     reviewed_time = db.Column(db.DateTime)
-    review_comment = db.Column(db.String(255))  # å®¡æ ¸æ„è§
\ No newline at end of file
+    review_comment = db.Column(db.String(255))  # å®¡æ ¸æ„è§
diff --git a/back_end/routes.py b/back_end/routes.py
index 1f2ded5..2abf7c8 100644
--- a/back_end/routes.py
+++ b/back_end/routes.py
@@ -1,6 +1,6 @@
 from flask import request, jsonify
 from app import app, db, SHANGHAI_TZ
-from models import User, Attendance, Face, Absence
+from models import User, Attendance, Face
 from flask_bcrypt import Bcrypt
 from flask_jwt_extended import (
     JWTManager,
@@ -11,12 +11,15 @@ from flask_jwt_extended import (
 )
 from datetime import datetime, date, timedelta
 from sqlalchemy import func, and_, extract
+from flask import Blueprint, request, jsonify
+from flask_jwt_extended import jwt_required, get_jwt_identity
 import face_recognition as fr
 import numpy as np
 import os
+from models import Absence
+from datetime import timedelta
 import uuid
-from sqlalchemy.sql.expression import case
-from pypinyin import lazy_pinyin
+import re
 
 bcrypt = Bcrypt(app)
 jwt = JWTManager(app)
@@ -41,8 +44,6 @@ def unauthorized_callback(error):
 # ç”¨æˆ·æ³¨å†Œ
 @app.route("/register", methods=["POST"])
 def register():
-    import re
-
     data = request.get_json()
 
     # æ–°å¢ï¼šæ£€æŸ¥å¯†ä¿é—®é¢˜å’Œç­”æ¡ˆæ˜¯å¦ä¸ºç©º
@@ -243,9 +244,6 @@ def attendance():
     today = current_time.date()
 
     if attendance_type == "clock_in":
-        # æ—©äº 07:00 çš„ç­¾åˆ°ä¸å…è®¸
-        if current_time.hour < 7:
-            return jsonify({"message": "å½“å‰ä¸åœ¨æ‰“å¡æ—¶é—´èŒƒå›´å†…"}), 400
         # æ£€æŸ¥æ˜¯å¦å·²ç­¾åˆ°
         existing_checkin = Attendance.query.filter(
             and_(
@@ -274,16 +272,6 @@ def attendance():
         return jsonify({"message": "Clock-in recorded successfully"}), 201
     else:
         # ä¸‹ç­æ‰“å¡ - æ›´æ–°ç°æœ‰è®°å½•
-        # æ™šäº 18:00 çš„ç­¾é€€ä¸å…è®¸ï¼ˆä»…å…è®¸ 18:00:00ï¼‰
-        if (current_time.hour > 18) or (
-            current_time.hour == 18
-            and (
-                current_time.minute > 0
-                or current_time.second > 0
-                or current_time.microsecond > 0
-            )
-        ):
-            return jsonify({"message": "å½“å‰ä¸åœ¨æ‰“å¡æ—¶é—´èŒƒå›´å†…"}), 400
         today_attendance = Attendance.query.filter(
             and_(
                 Attendance.user_id == current_user_id,
@@ -311,9 +299,12 @@ def attendance():
         # åˆ¤æ–­æ˜¯å¦æ—©é€€ï¼ˆå‡è®¾18:00ä¸ºä¸‹ç­æ—¶é—´ï¼‰
         if current_time.hour < 18:
             today_attendance.status = "æ—©é€€"
-        else:
-            # 18:00 ä¹‹åï¼ˆç­‰äº18:00ï¼‰ç­¾é€€ï¼Œç»Ÿä¸€æ˜¾ç¤ºä¸ºæ­£å¸¸
+        elif current_time.hour < 19:
+            # 18:00-18:59ä¹‹é—´çš„ç­¾é€€æ˜¾ç¤ºä¸ºæ­£å¸¸
             today_attendance.status = "æ­£å¸¸"
+        else:
+            # 19:00åŠä¹‹åçš„ç­¾é€€æ˜¾ç¤ºä¸ºåŠ ç­
+            today_attendance.status = "åŠ ç­"
 
         db.session.commit()
         return jsonify({"message": "Clock-out recorded successfully"}), 200
@@ -342,13 +333,12 @@ def get_user_profile():
     )
 
 
-# è‹¥å·²ç­¾åˆ°ä½†æœªç­¾é€€ä¸”éè¯·å‡ï¼Œè®°ä¸ºâ€œæœªç­¾é€€â€
-# ä¸è‡ªåŠ¨åˆ›å»ºç¼ºå‹¤è®°å½•ï¼ˆæ— æ‰“å¡ç”¨æˆ·ä¸ç”Ÿæˆè®°å½•ï¼‰
-def apply_end_of_day_rules():
-    now = datetime.now(SHANGHAI_TZ)
-    today = now.date()
-    if now.hour < 18:
-        return
+# è‹¥å·²ç­¾åˆ°ä½†æœªç­¾é€€ä¸”éè¯·å‡ï¼Œè®°ä¸º"æœªç­¾é€€"
+def mark_unclocked_out_employees():
+    """æ ‡è®°æœªç­¾é€€å‘˜å·¥"""
+    today = datetime.now(SHANGHAI_TZ).date()
+
+    # æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ï¼Œå®æ—¶æ ‡è®°æœªç­¾é€€
     employees = User.query.filter_by(role="å‘˜å·¥").all()
     for u in employees:
         approved_leave = Absence.query.filter(
@@ -408,14 +398,14 @@ def calculate_should_attend_days(user_id, year, month, today):
 @jwt_required()
 def get_personal_attendance():
     current_user_id = int(get_jwt_identity())
-    apply_end_of_day_rules()
+    mark_unclocked_out_employees()
 
     now = datetime.now(SHANGHAI_TZ)
     today = date.today()
     current_month = now.month
     current_year = now.year
 
-    # æ€»å‡ºå‹¤å¤©æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+    # æ€»å‡ºå‹¤å¤©æ•°
     total_days = (
         db.session.query(func.count(Attendance.attendance_id))
         .filter(
@@ -430,7 +420,7 @@ def get_personal_attendance():
         or 0
     )
 
-    # è¿Ÿåˆ°æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+    # è¿Ÿåˆ°æ¬¡æ•°
     late_count = (
         db.session.query(func.count(Attendance.attendance_id))
         .filter(
@@ -446,7 +436,7 @@ def get_personal_attendance():
         or 0
     )
 
-    # æ—©é€€æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+    # æ—©é€€æ¬¡æ•°
     early_leave_count = (
         db.session.query(func.count(Attendance.attendance_id))
         .filter(
@@ -462,7 +452,7 @@ def get_personal_attendance():
         or 0
     )
 
-    # æ­£å¸¸æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+    # æ­£å¸¸æ¬¡æ•°
     normal_count = (
         db.session.query(func.count(Attendance.attendance_id))
         .filter(
@@ -483,7 +473,7 @@ def get_personal_attendance():
         current_user_id, current_year, current_month, today
     )
 
-    # æœ€è¿‘è®°å½•ï¼ˆä¸å«æœªæ¥æ—¥æœŸï¼‰
+    # æœ€è¿‘è®°å½•
     recent_records = (
         Attendance.query.filter(
             and_(
@@ -496,8 +486,39 @@ def get_personal_attendance():
         .all()
     )
 
+    # å°†å¤„äºé€šè¿‡çš„è¯·å‡åŒºé—´å†…çš„è®°å½•æ ‡è®°ä¸ºâ€œè¯·å‡â€ï¼Œå¹¶éšè—æ‰“å¡æ—¶é—´
+    approved_leaves = Absence.query.filter(
+        and_(Absence.user_id == current_user_id, Absence.status == 2)
+    ).all()
+
+    def in_leave(dt):
+        if not dt:
+            return False
+        for lv in approved_leaves:
+            if lv.start_time <= dt <= lv.end_time:
+                return True
+        return False
+
+    def covers_workday(day):
+        if not day:
+            return False
+        work_start = datetime(day.year, day.month, day.day, 8, 0, 0)
+        work_end = datetime(day.year, day.month, day.day, 18, 0, 0)
+        for lv in approved_leaves:
+            if lv.start_time <= work_start and lv.end_time >= work_end:
+                return True
+        return False
+
     records_list = []
     for record in recent_records:
+        is_leave = in_leave(record.clock_in_time) or in_leave(record.clock_out_time)
+        day = (
+            record.clock_in_time.date()
+            if record.clock_in_time
+            else (record.clock_out_time.date() if record.clock_out_time else None)
+        )
+        if covers_workday(day):
+            is_leave = True
         records_list.append(
             {
                 "attendance_id": record.attendance_id,
@@ -511,7 +532,7 @@ def get_personal_attendance():
                     if record.clock_out_time
                     else None
                 ),
-                "status": record.status,
+                "status": ("è¯·å‡" if is_leave else record.status),
             }
         )
 
@@ -538,11 +559,7 @@ def get_personal_attendance():
         .scalar()
         or 0
     )
-    if (
-        datetime.now(SHANGHAI_TZ).hour >= 18
-        and has_any_att_today == 0
-        and not on_leave_today
-    ):
+    if has_any_att_today == 0 and not on_leave_today:
         anchor_time = datetime(today.year, today.month, today.day, 0, 0, 0)
         records_list.insert(
             0,
@@ -575,8 +592,7 @@ def get_personal_attendance():
 @app.route("/admin/attendance/daily", methods=["GET"])
 @jwt_required()
 def get_daily_attendance_overview():
-    # åº”ç”¨18:00åçš„è§„åˆ™æ›´æ–°
-    apply_end_of_day_rules()
+    mark_unclocked_out_employees()
     current_user_id = int(get_jwt_identity())
     user = User.query.get(current_user_id)
 
@@ -657,8 +673,8 @@ def get_daily_attendance_overview():
 @app.route("/admin/attendance/employees", methods=["GET"])
 @jwt_required()
 def get_employees_attendance():
-    # åº”ç”¨18:00åçš„è§„åˆ™æ›´æ–°
-    apply_end_of_day_rules()
+    # åº”ç”¨æœªç­¾é€€æ ‡è®°è§„åˆ™
+    mark_unclocked_out_employees()
     current_user_id = int(get_jwt_identity())
     user = User.query.get(current_user_id)
 
@@ -666,136 +682,217 @@ def get_employees_attendance():
     if not user or user.role != "ç®¡ç†å‘˜":
         return jsonify({"message": "Access denied. Admin role required."}), 403
 
-    today = date.today()
-
     # è·å–æ’åºå‚æ•°
     sort_by = request.args.get(
         "sort_by", "account"
     )  # name, late_count, early_leave_count, normal_count, leave_count
     sort_order = request.args.get("sort_order", "asc")  # asc, desc
-    # å®‰å…¨åœ°è·å–å’Œè½¬æ¢åˆ†é¡µå‚æ•°
-    page_param = request.args.get("page", 1)
-    page_size_param = request.args.get("page_size", 10)
 
-    # å¤„ç†å¯èƒ½ä¸º'undefined'æˆ–å…¶ä»–éæ•°å­—å€¼çš„æƒ…å†µ
-    try:
-        page = int(page_param)
-    except (ValueError, TypeError):
-        page = 1
+    now = datetime.now(SHANGHAI_TZ)
+    current_month = now.month
+    current_year = now.year
+    today = date.today()
 
-    try:
-        page_size = int(page_size_param)
-    except (ValueError, TypeError):
-        page_size = 10
-
-    # éªŒè¯é¡µç å’Œæ¯é¡µå¤§å°
-    if page < 1:
-        return jsonify({"message": "é¡µç å¿…é¡»å¤§äºç­‰äº1"}), 400
-    if page_size < 1:
-        return jsonify({"message": "æ¯é¡µå¤§å°å¿…é¡»å¤§äºç­‰äº1"}), 400
-
-    # åŠ¨æ€è®¡ç®—ç»Ÿè®¡æ•°æ®å¹¶æ’åº
-    subquery = (
-        db.session.query(
-            User.user_id,
-            User.name,
-            User.account,
-            func.count(Attendance.attendance_id).label("total_days"),
-            func.sum(case((Attendance.status == "è¿Ÿåˆ°", 1), else_=0)).label(
-                "late_count"
-            ),
-            func.sum(case((Attendance.status == "æ—©é€€", 1), else_=0)).label(
-                "early_leave_count"
-            ),
-            func.sum(case((Attendance.status == "æ­£å¸¸", 1), else_=0)).label(
-                "normal_count"
-            ),
-            func.sum(case((Absence.status == 2, 1), else_=0)).label("leave_count"),
+    # è·å–æ‰€æœ‰å‘˜å·¥
+    employees = User.query.filter_by(role="å‘˜å·¥").all()
+    employees_list = []
+
+    for user in employees:
+        # æ˜¯å¦å½“å¤©è¯·å‡
+        on_leave_today = (
+            Absence.query.filter(
+                and_(
+                    Absence.user_id == user.user_id,
+                    Absence.status == 2,
+                    func.date(Absence.start_time) <= today,
+                    func.date(Absence.end_time) >= today,
+                )
+            ).first()
+            is not None
+        )
+
+        # å½“å¤©æ˜¯å¦å­˜åœ¨ä»»ä½•è€ƒå‹¤è®°å½•
+        has_any_att_today = (
+            db.session.query(func.count(Attendance.attendance_id))
+            .filter(
+                and_(
+                    Attendance.user_id == user.user_id,
+                    func.date(Attendance.clock_in_time) == today,
+                )
+            )
+            .scalar()
+            or 0
         )
-        .outerjoin(Attendance, Attendance.user_id == User.user_id)
-        .outerjoin(Absence, Absence.user_id == User.user_id)
-        .filter(User.role == "å‘˜å·¥")
-        .group_by(User.user_id)
-        .subquery()
-    )
 
-    query = db.session.query(subquery)
+        # ä»Šæ—¥å‡ºå‹¤ï¼ˆæ’é™¤è¯·å‡ã€ç¼ºå‹¤ï¼‰
+        today_attendance = (
+            db.session.query(func.count(Attendance.attendance_id))
+            .filter(
+                and_(
+                    Attendance.user_id == user.user_id,
+                    func.date(Attendance.clock_in_time) == today,
+                    Attendance.status.notin_(["è¯·å‡", "ç¼ºå‹¤"]),
+                )
+            )
+            .scalar()
+            or 0
+        )
 
-    # è·å–æŸ¥è¯¢ç»“æœ
-    employees = query.all()
+        # 18:00åï¼Œæ— ä»»ä½•æ‰“å¡ä¸”éè¯·å‡ â†’ æ˜ç¡®æ ‡è®°ä¸ºç¼ºå‹¤ï¼ˆå®æ—¶æ˜¾ç¤ºï¼‰
+        is_absent_today = has_any_att_today == 0 and not on_leave_today
 
-    # å¦‚æœæŒ‰å§“åæ’åºï¼Œä½¿ç”¨æ‹¼éŸ³æ’åº
-    if sort_by == "name":
-        employees = sorted(
-            employees,
-            key=lambda x: "".join(lazy_pinyin(x.name)),
-            reverse=(sort_order == "desc"),
+        # æœ¬æœˆæ€»å‡ºå‹¤ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+        monthly_total = (
+            db.session.query(func.count(Attendance.attendance_id))
+            .filter(
+                and_(
+                    Attendance.user_id == user.user_id,
+                    extract("month", Attendance.clock_in_time) == current_month,
+                    extract("year", Attendance.clock_in_time) == current_year,
+                    func.date(Attendance.clock_in_time) <= today,
+                )
+            )
+            .scalar()
+            or 0
         )
-    else:
-        # å…¶ä»–å­—æ®µæ’åº
-        employees = sorted(
-            employees,
-            key=lambda x: getattr(x, sort_by),
-            reverse=(sort_order == "desc"),
+
+        # æœ¬æœˆè¿Ÿåˆ°æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+        monthly_late = (
+            db.session.query(func.count(Attendance.attendance_id))
+            .filter(
+                and_(
+                    Attendance.user_id == user.user_id,
+                    extract("month", Attendance.clock_in_time) == current_month,
+                    extract("year", Attendance.clock_in_time) == current_year,
+                    Attendance.status == "è¿Ÿåˆ°",
+                    func.date(Attendance.clock_in_time) <= today,
+                )
+            )
+            .scalar()
+            or 0
         )
 
-    # åˆ†é¡µ
-    total = len(employees)
-    employees = employees[(page - 1) * page_size : page * page_size]
+        # æœ¬æœˆæ—©é€€æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+        monthly_early_leave = (
+            db.session.query(func.count(Attendance.attendance_id))
+            .filter(
+                and_(
+                    Attendance.user_id == user.user_id,
+                    extract("month", Attendance.clock_in_time) == current_month,
+                    extract("year", Attendance.clock_in_time) == current_year,
+                    Attendance.status == "æ—©é€€",
+                    func.date(Attendance.clock_in_time) <= today,
+                )
+            )
+            .scalar()
+            or 0
+        )
 
-    employees_list = []
-    for row in employees:
-        employees_list.append(
-            {
-                "user_id": row.user_id,
-                "name": row.name,
-                "account": row.account,
-                "monthly_stats": {
-                    "total_days": row.total_days,
-                    "late_count": row.late_count,
-                    "early_leave_count": row.early_leave_count,
-                    "normal_count": row.normal_count,
-                    "leave_count": row.leave_count,
-                },
-                "on_leave_today": db.session.query(func.count(Absence.id))
-                .filter(
-                    Absence.user_id == row.user_id,
+        # æœ¬æœˆæ­£å¸¸æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+        monthly_normal = (
+            db.session.query(func.count(Attendance.attendance_id))
+            .filter(
+                and_(
+                    Attendance.user_id == user.user_id,
+                    extract("month", Attendance.clock_in_time) == current_month,
+                    extract("year", Attendance.clock_in_time) == current_year,
+                    Attendance.status == "æ­£å¸¸",
+                    func.date(Attendance.clock_in_time) <= today,
+                )
+            )
+            .scalar()
+            or 0
+        )
+
+        # æœ¬æœˆè¯·å‡æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼Œç»Ÿè®¡é€šè¿‡çš„è¯·å‡ç”³è¯·æ¬¡æ•°ï¼‰
+        monthly_leave = (
+            db.session.query(func.count(Absence.id))
+            .filter(
+                and_(
+                    Absence.user_id == user.user_id,
                     Absence.status == 2,
+                    extract("month", Absence.start_time) == current_month,
+                    extract("year", Absence.start_time) == current_year,
                     func.date(Absence.start_time) <= today,
-                    func.date(Absence.end_time) >= today,
-                )
-                .scalar()
-                > 0,
-                "is_absent_today": db.session.query(
-                    func.count(Attendance.attendance_id)
                 )
-                .filter(
-                    Attendance.user_id == row.user_id,
-                    func.date(Attendance.clock_in_time) == today,
-                )
-                .scalar()
-                == 0,
-                "today_attendance": db.session.query(
-                    func.count(Attendance.attendance_id)
-                )
-                .filter(
-                    Attendance.user_id == row.user_id,
-                    func.date(Attendance.clock_in_time) == today,
+            )
+            .scalar()
+            or 0
+        )
+
+        # æœ¬æœˆæœªç­¾é€€æ¬¡æ•°ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+        monthly_not_checked_out = (
+            db.session.query(func.count(Attendance.attendance_id))
+            .filter(
+                and_(
+                    Attendance.user_id == user.user_id,
+                    extract("month", Attendance.clock_in_time) == current_month,
+                    extract("year", Attendance.clock_in_time) == current_year,
+                    Attendance.status == "æœªç­¾é€€",
+                    func.date(Attendance.clock_in_time) <= today,
                 )
-                .scalar(),
+            )
+            .scalar()
+            or 0
+        )
+
+        # åº”å‡ºå‹¤å¤©æ•°è®¡ç®—ï¼ˆä¸è®¡æœªæ¥æ—¥æœŸï¼‰
+        should_attend_days = calculate_should_attend_days(
+            current_user_id, current_year, current_month, today
+        )
+        employees_list.append(
+            {
+                "user_id": user.user_id,
+                "name": user.name,
+                "account": user.account,
+                "today_attendance": today_attendance,
+                "is_absent_today": is_absent_today,
+                "on_leave_today": on_leave_today,
+                "monthly_stats": {
+                    "total_days": monthly_total,
+                    "late_count": monthly_late,
+                    "early_leave_count": monthly_early_leave,
+                    "normal_count": monthly_normal,
+                    "leave_count": monthly_leave,
+                    "not_checked_out_count": monthly_not_checked_out,
+                    "should_attend": should_attend_days,
+                },
             }
         )
 
+    if sort_by == "late_count":
+        employees_list.sort(
+            key=lambda x: x["monthly_stats"]["late_count"],
+            reverse=(sort_order == "desc"),
+        )
+    elif sort_by == "early_leave_count":
+        employees_list.sort(
+            key=lambda x: x["monthly_stats"]["early_leave_count"],
+            reverse=(sort_order == "desc"),
+        )
+    elif sort_by == "normal_count":
+        employees_list.sort(
+            key=lambda x: x["monthly_stats"]["normal_count"],
+            reverse=(sort_order == "desc"),
+        )
+    elif sort_by == "leave_count":
+        employees_list.sort(
+            key=lambda x: x["monthly_stats"]["leave_count"],
+            reverse=(sort_order == "desc"),
+        )
+    elif sort_by == "not_checked_out_count":
+        employees_list.sort(
+            key=lambda x: x["monthly_stats"]["not_checked_out_count"],
+            reverse=(sort_order == "desc"),
+        )
+    elif sort_by == "name":
+        employees_list.sort(key=lambda x: x["name"], reverse=(sort_order == "desc"))
+    elif sort_by == "account":  # é»˜è®¤æŒ‰å·¥å·
+        employees_list.sort(key=lambda x: x["account"], reverse=(sort_order == "desc"))
+
     return (
         jsonify(
-            {
-                "employees": employees_list,
-                "total": total,
-                "sort_by": sort_by,
-                "sort_order": sort_order,
-                "current_page": page,
-                "page_size": page_size,
-            }
+            {"employees": employees_list, "sort_by": sort_by, "sort_order": sort_order}
         ),
         200,
     )
@@ -811,22 +908,9 @@ def create_absence():
         start_time_str = data.get("start_time")
         end_time_str = data.get("end_time")
         reason = (data.get("reason") or "").strip()
-
-        # æ£€æŸ¥absence_typeæ˜¯å¦åœ¨è¯·æ±‚æ•°æ®ä¸­
-        if "absence_type" not in data:
-            return jsonify(message="æ‚¨æœªé€‰æ‹©è¯·å‡ç±»å‹"), 400
-
         absence_type = data.get("absence_type", 0)  # é»˜è®¤å€¼ä¸º0ï¼ˆç—…å‡ï¼‰
-
-        # æ£€æŸ¥å…¶ä»–å¿…è¦å‚æ•°
-        if not start_time_str:
-            return jsonify(message="è¯·å¡«å†™/é€‰æ‹©è¯·å‡å¼€å§‹æ—¶é—´"), 400
-
-        if not end_time_str:
-            return jsonify(message="è¯·å¡«å†™/é€‰æ‹©è¯·å‡ç»“æŸæ—¶é—´"), 400
-
-        if not reason:
-            return jsonify(message="è¯·å¡«å†™è¯·å‡åŸå› "), 400
+        if not start_time_str or not end_time_str or not reason:
+            return jsonify(message="å‚æ•°ä¸å®Œæ•´"), 400
 
         try:
             start_time = datetime.fromisoformat(start_time_str)
@@ -851,47 +935,16 @@ def create_absence():
         return jsonify(message=f"æœåŠ¡å™¨é”™è¯¯: {str(e)}"), 500
 
 
-# ä¸ªäººè¯·å‡ç”³è¯·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼Œæ¯é¡µ5æ¡ï¼‰
+# ä¸ªäººè¯·å‡ç”³è¯·åˆ—è¡¨
 @app.route("/absence/personal", methods=["GET"])
 @jwt_required()
 def get_personal_absences():
     current_user_id = int(get_jwt_identity())
-    # è·å–åˆ†é¡µå‚æ•°ï¼Œé»˜è®¤ä¸ºç¬¬1é¡µ
-    page = request.args.get("page", 1, type=int)
-    per_page = 5
-    # è·å–çŠ¶æ€è¿‡æ»¤å‚æ•°
-    status = request.args.get("status", type=int)
-    # è·å–æ’åºå‚æ•°
-    sort_by = request.args.get("sort_by", "start_time")  # é»˜è®¤æŒ‰èµ·å§‹æ—¶é—´æ’åº
-    order = request.args.get("order", "desc")  # é»˜è®¤å€’åº
-
-    # æ„å»ºæŸ¥è¯¢
-    query = Absence.query.filter_by(user_id=current_user_id)
-    
-    # å¦‚æœæä¾›äº†çŠ¶æ€å‚æ•°ï¼Œåˆ™æŒ‰çŠ¶æ€è¿‡æ»¤
-    if status is not None:
-        query = query.filter(Absence.status == status)
-    
-    # ç¡®å®šæ’åºå­—æ®µ
-    if sort_by == "end_time":
-        sort_field = Absence.end_time
-    else:
-        sort_field = Absence.start_time
-    
-    # ç¡®å®šæ’åºæ–¹å‘
-    if order == "asc":
-        sort_field = sort_field.asc()
-    else:
-        sort_field = sort_field.desc()
-    
-    # ä½¿ç”¨paginateè¿›è¡Œåˆ†é¡µæŸ¥è¯¢
-    pagination = (
-        query
-        .order_by(sort_field)
-        .paginate(page=page, per_page=per_page, error_out=False)
+    absences = (
+        Absence.query.filter_by(user_id=current_user_id)
+        .order_by(Absence.start_time.desc())
+        .all()
     )
-
-    absences = pagination.items
     res = [
         {
             "id": a.id,
@@ -908,23 +961,10 @@ def get_personal_absences():
         }
         for a in absences
     ]
-
-    # è¿”å›åˆ†é¡µä¿¡æ¯å’Œæ•°æ®
-    return (
-        jsonify(
-            {
-                "absences": res,
-                "total": pagination.total,
-                "pages": pagination.pages,
-                "current_page": pagination.page,
-                "per_page": per_page,
-            }
-        ),
-        200,
-    )
+    return jsonify(absences=res), 200
 
 
-# ç®¡ç†å‘˜æŸ¥çœ‹è¯·å‡ç”³è¯·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
+# ç®¡ç†å‘˜æŸ¥çœ‹è¯·å‡ç”³è¯·åˆ—è¡¨ï¼ˆprocessed=true æŸ¥çœ‹å·²å¤„ç†ï¼Œå¦åˆ™æŸ¥çœ‹æœªè¯»ï¼‰
 @app.route("/admin/absence", methods=["GET"])
 @jwt_required()
 def admin_list_absences():
@@ -932,45 +972,13 @@ def admin_list_absences():
     user = User.query.get(current_user_id)
     if not user or user.role != "ç®¡ç†å‘˜":
         return jsonify(message="Access denied. Admin role required."), 403
-
     processed = request.args.get("processed", "false").lower() == "true"
-    # è·å–å…·ä½“çŠ¶æ€å‚æ•°ï¼ˆç”¨äºå·²é€šè¿‡/å·²æ‹’ç»åˆ†ç¦»æ˜¾ç¤ºï¼‰
-    specific_status = request.args.get("status", type=int)
-    # è·å–åˆ†é¡µå‚æ•°ï¼Œé»˜è®¤ä¸ºç¬¬1é¡µ
-    page = request.args.get("page", 1, type=int)
-    # è·å–æ¯é¡µè®°å½•æ•°ï¼Œé»˜è®¤ä¸º5æ¡ï¼Œæœ€å¤§ä¸è¶…è¿‡1000æ¡
-    per_page = min(request.args.get("page_size", 5, type=int), 1000)
-    
-    # è·å–è¿‡æ»¤å‚æ•°
-    name_filter = request.args.get("name")
-    absence_type_filter = request.args.get("absence_type", type=int)
-
     query = Absence.query
-    if specific_status is not None:
-        # å¦‚æœæä¾›äº†å…·ä½“çŠ¶æ€å‚æ•°ï¼ŒæŒ‰å…·ä½“çŠ¶æ€è¿‡æ»¤
-        query = query.filter(Absence.status == specific_status)
-    elif processed:
-        # å¦‚æœåªæä¾›äº†processed=trueï¼ŒæŒ‰å·²å¤„ç†çŠ¶æ€è¿‡æ»¤ï¼ˆå…¼å®¹æ—§æ¥å£ï¼‰
+    if processed:
         query = query.filter(Absence.status.in_([1, 2]))
     else:
-        # æœªå¤„ç†çŠ¶æ€
         query = query.filter(Absence.status == 0)
-    
-    # åº”ç”¨å§“åè¿‡æ»¤
-    if name_filter:
-        # é€šè¿‡ç”¨æˆ·è¡¨å…³è”è¿‡æ»¤
-        query = query.join(User).filter(User.name.ilike(f"%{name_filter}%"))
-    
-    # åº”ç”¨è¯·å‡ç±»å‹è¿‡æ»¤
-    if absence_type_filter is not None:
-        query = query.filter(Absence.absence_type == absence_type_filter)
-
-    # ä½¿ç”¨paginateè¿›è¡Œåˆ†é¡µæŸ¥è¯¢
-    pagination = query.order_by(Absence.start_time.desc()).paginate(
-        page=page, per_page=per_page, error_out=False
-    )
-    absences = pagination.items
-
+    absences = query.order_by(Absence.start_time.desc()).all()
     res = [
         {
             "id": a.id,
@@ -993,20 +1001,7 @@ def admin_list_absences():
         }
         for a in absences
     ]
-
-    # è¿”å›åˆ†é¡µä¿¡æ¯å’Œæ•°æ®
-    return (
-        jsonify(
-            {
-                "absences": res,
-                "total": pagination.total,
-                "pages": pagination.pages,
-                "current_page": pagination.page,
-                "per_page": per_page,
-            }
-        ),
-        200,
-    )
+    return jsonify(absences=res), 200
 
 
 # ç®¡ç†å‘˜å®¡æ ¸è¯·å‡ç”³è¯·
@@ -1027,52 +1022,3 @@ def admin_review_absence(absence_id):
     absence.status = 2 if decision == "approve" else 1
     db.session.commit()
     return jsonify(message="æ“ä½œæˆåŠŸ", id=absence.id, status=absence.status), 200
-
-
-# ç®¡ç†å‘˜æ‰¹é‡å®¡æ ¸è¯·å‡ç”³è¯·
-@app.route("/admin/absence/batch", methods=["PATCH"])
-@jwt_required()
-def admin_batch_review_absence():
-    current_user_id = int(get_jwt_identity())
-    user = User.query.get(current_user_id)
-    if not user or user.role != "ç®¡ç†å‘˜":
-        return jsonify(message="Access denied. Admin role required."), 403
-    
-    data = request.get_json() or {}
-    decision = data.get("decision")
-    absence_ids = data.get("absence_ids", [])
-    
-    if decision not in ("approve", "reject"):
-        return jsonify(message="éæ³•æ“ä½œ"), 400
-    
-    if not absence_ids:
-        return jsonify(message="è¯·é€‰æ‹©è¦å¤„ç†çš„è¯·å‡ç”³è¯·"), 400
-    
-    success_count = 0
-    failed_ids = []
-    
-    for absence_id in absence_ids:
-        try:
-            absence = Absence.query.get(absence_id)
-            if absence and absence.status == 0:  # åªå¤„ç†æœªå¤„ç†çš„ç”³è¯·
-                absence.status = 2 if decision == "approve" else 1
-                success_count += 1
-            else:
-                failed_ids.append(absence_id)
-        except Exception as e:
-            failed_ids.append(absence_id)
-            print(f"å¤„ç†è¯·å‡ç”³è¯· {absence_id} æ—¶å‡ºé”™: {e}")
-    
-    db.session.commit()
-    
-    if failed_ids:
-        return jsonify(
-            message=f"æˆåŠŸå¤„ç† {success_count} æ¡ç”³è¯·ï¼Œå¤±è´¥ {len(failed_ids)} æ¡",
-            failed_ids=failed_ids,
-            success_count=success_count
-        ), 207  # Multi-Status
-    
-    return jsonify(
-        message=f"æˆåŠŸå¤„ç† {success_count} æ¡ç”³è¯·",
-        success_count=success_count
-    ), 200
diff --git a/front_end/src/views/admin.vue b/front_end/src/views/admin.vue
index 4ac05c5..436fe5b 100644
--- a/front_end/src/views/admin.vue
+++ b/front_end/src/views/admin.vue
@@ -19,28 +19,22 @@
       <!-- å·¦ä¾§å¯¼èˆª -->
       <div class="sidebar">
         <nav class="nav-menu">
-          <div v-if="userProfile.role === 'ç®¡ç†å‘˜'" class="nav-item" :class="{ active: activeTab === 'dashboard' }"
-            @click="setActiveTab('dashboard')">
+          <div v-if="userProfile.role === 'ç®¡ç†å‘˜'" class="nav-item" :class="{ active: activeTab === 'dashboard' }" @click="setActiveTab('dashboard')">
             <span>ğŸ“Š</span> è€ƒå‹¤æ¦‚è§ˆ
           </div>
-          <div v-if="userProfile.role === 'ç®¡ç†å‘˜'" class="nav-item" :class="{ active: activeTab === 'employees' }"
-            @click="setActiveTab('employees')">
+          <div v-if="userProfile.role === 'ç®¡ç†å‘˜'" class="nav-item" :class="{ active: activeTab === 'employees' }" @click="setActiveTab('employees')">
             <span>ğŸ‘¥</span> å‘˜å·¥è€ƒå‹¤
           </div>
-          <div v-if="userProfile.role === 'å‘˜å·¥'" class="nav-item" :class="{ active: activeTab === 'personal' }"
-            @click="setActiveTab('personal')">
+          <div v-if="userProfile.role === 'å‘˜å·¥'" class="nav-item" :class="{ active: activeTab === 'personal' }" @click="setActiveTab('personal')">
             <span>ğŸ‘¤</span> ä¸ªäººè€ƒå‹¤
           </div>
-          <div v-if="userProfile.role === 'å‘˜å·¥'" class="nav-item" :class="{ active: activeTab === 'clock' }"
-            @click="setActiveTab('clock')">
+          <div v-if="userProfile.role === 'å‘˜å·¥'" class="nav-item" :class="{ active: activeTab === 'clock' }" @click="setActiveTab('clock')">
             <span>â°</span> æ‰“å¡
           </div>
-          <div v-if="userProfile.role === 'å‘˜å·¥'" class="nav-item" :class="{ active: activeTab === 'face_register' }"
-            @click="setActiveTab('face_register')">
+          <div v-if="userProfile.role === 'å‘˜å·¥'" class="nav-item" :class="{ active: activeTab === 'face_register' }" @click="setActiveTab('face_register')">
             <span>ğŸ“·</span> äººè„¸å½•å…¥
           </div>
-          <div v-if="userProfile.role === 'ç®¡ç†å‘˜'" class="nav-item" :class="{ active: activeTab === 'face_review' }"
-            @click="setActiveTab('face_review')">
+          <div v-if="userProfile.role === 'ç®¡ç†å‘˜'" class="nav-item" :class="{ active: activeTab === 'face_review' }" @click="setActiveTab('face_review')">
             <span>ğŸ‘ï¸</span> äººè„¸å½•å…¥å®¡æ ¸
           </div>
           <div class="nav-item" :class="{ active: activeTab === 'leave' }" @click="setActiveTab('leave')">
@@ -76,11 +70,6 @@
               <div class="stat-label">æ­£å¸¸äººæ•°</div>
             </div>
           </div>
-          <div class="charts-container">
-            <h3>è€ƒå‹¤ç»Ÿè®¡å›¾è¡¨</h3>
-            <div id="attendance-chart-1" style="width: 100%; height: 400px;"></div>
-            <div id="attendance-chart-2" style="width: 100%; height: 400px; margin-top: 20px;"></div>
-          </div>
           <div class="date-info">
             <p>ç»Ÿè®¡æ—¥æœŸï¼š{{ dailyStats.date }}</p>
           </div>
@@ -131,9 +120,9 @@
                   <td>{{ employee.account }}</td>
                   <td>
                     <span
-                      :class="(employee.on_leave_today ? 'status-leave' : (employee.is_absent_today ? 'status-absent' : (employee.today_attendance > 0 ? 'status-present' : 'status-absent')))">
-                      {{ employee.on_leave_today ? 'è¯·å‡' : (employee.is_absent_today ? 'æœªå‡ºå‹¤' : (employee.today_attendance
-                        > 0 ? 'å·²å‡ºå‹¤' : 'æœªå‡ºå‹¤')) }}
+                      :class="(employee.on_leave_today ? 'status-leave' : (employee.is_absent_today ? 'status-absent' : (employee.today_attendance > 0 ? 'status-present' : 'status-absent')))"
+                    >
+                      {{ employee.on_leave_today ? 'è¯·å‡' : (employee.is_absent_today ? 'æœªå‡ºå‹¤' : (employee.today_attendance > 0 ? 'å·²å‡ºå‹¤' : 'æœªå‡ºå‹¤')) }}
                     </span>
                   </td>
                   <td>{{ employee.monthly_stats.total_days }}</td>
@@ -146,23 +135,6 @@
               </tbody>
             </table>
           </div>
-
-          <!-- åˆ†é¡µæ§ä»¶ -->
-          <div class="pagination-wrapper" v-if="totalEmployees > 0">
-            <div class="pagination-controls">
-              <button :disabled="currentPage === 1" @click="handlePageChange(currentPage - 1)">ä¸Šä¸€é¡µ</button>
-              <span>ç¬¬ {{ currentPage }} é¡µ / å…± {{ Math.ceil(totalEmployees / pageSize) }} é¡µ</span>
-              <button :disabled="currentPage === Math.ceil(totalEmployees / pageSize)"
-                @click="handlePageChange(currentPage + 1)">ä¸‹ä¸€é¡µ</button>
-            </div>
-            <div class="pagination-controls">
-              <span>è·³è½¬åˆ°ç¬¬</span>
-              <input type="number" v-model.number="jumpToPage" placeholder="è·³è½¬é¡µç " min="1"
-                :max="Math.ceil(totalEmployees / pageSize)" style="width: 60px; text-align: center; margin: 0 8px;" />
-              <span>é¡µ</span>
-              <button @click="handlePageJump">è·³è½¬</button>
-            </div>
-          </div>
         </div>
 
         <!-- ä¸ªäººè€ƒå‹¤ -->
@@ -206,10 +178,8 @@
                 <tbody>
                   <tr v-for="record in recentRecords" :key="record.attendance_id">
                     <td>{{ formatDate(record.clock_in_time) }}</td>
-                    <td>{{ record.status === 'è¯·å‡' ? '-' : (record.status === 'æœªå‡ºå‹¤' ? 'æœªæ‰“å¡' :
-                      formatTime(record.clock_in_time)) }}</td>
-                    <td>{{ record.status === 'è¯·å‡' ? '-' : (record.clock_out_time ? formatTime(record.clock_out_time) :
-                      'æœªæ‰“å¡') }}</td>
+                    <td>{{ record.status === 'è¯·å‡' ? '-' : (record.status === 'æœªå‡ºå‹¤' ? 'æœªæ‰“å¡' : formatTime(record.clock_in_time)) }}</td>
+                    <td>{{ record.status === 'è¯·å‡' ? '-' : (record.clock_out_time ? formatTime(record.clock_out_time) : 'æœªæ‰“å¡') }}</td>
                     <td>
                       <span :class="getStatusClass(record.status)">{{ record.status }}</span>
                     </td>
@@ -269,22 +239,27 @@
 
           <!-- æ ‡ç­¾åˆ‡æ¢ -->
           <div class="tab-switch">
-            <button :class="{ active: faceReviewTab === 'pending' }"
-              @click="faceReviewTab = 'pending'; loadPendingFaceEnrollments()">
+            <button :class="{ active: faceReviewTab === 'pending' }" @click="faceReviewTab = 'pending'; loadPendingFaceEnrollments()">
               å¾…å®¡æ ¸
             </button>
-            <button :class="{ active: faceReviewTab === 'processed' }"
-              @click="faceReviewTab = 'processed'; loadReviewedFaceEnrollments()">
+            <button :class="{ active: faceReviewTab === 'processed' }" @click="faceReviewTab = 'processed'; loadReviewedFaceEnrollments()">
               å·²å¤„ç†
             </button>
           </div>
 
           <!-- ç­›é€‰æ§ä»¶ -->
           <div class="filter-controls" style="margin: 15px 0;">
-            <input type="text" v-model="faceNameFilter" placeholder="æœç´¢å§“å"
-              style="margin-right: 10px; padding: 5px; width: 200px;" />
-            <select v-model.number="faceStatusFilter" style="padding: 5px; margin-right: 10px;"
-              v-if="faceReviewTab === 'processed'">
+            <input
+              type="text"
+              v-model="faceNameFilter"
+              placeholder="æœç´¢å§“å"
+              style="margin-right: 10px; padding: 5px; width: 200px;"
+            />
+            <select
+              v-model.number="faceStatusFilter"
+              style="padding: 5px; margin-right: 10px;"
+              v-if="faceReviewTab === 'processed'"
+            >
               <option value="-1">å…¨éƒ¨çŠ¶æ€</option>
               <option value="1">å·²é€šè¿‡</option>
               <option value="2">å·²æ‹’ç»</option>
@@ -295,38 +270,41 @@
           <div v-if="faceReviewTab === 'pending'" class="records-table">
             <div v-if="loadingPending" class="loading-state">åŠ è½½ä¸­...</div>
             <template v-else>
-              <table>
-                <thead>
-                  <tr>
-                    <th>å§“å</th>
-                    <th>å·¥å·</th>
-                    <th>æäº¤æ—¶é—´</th>
-                    <th>äººè„¸ç…§ç‰‡</th>
-                    <th>æ“ä½œ</th>
-                  </tr>
-                </thead>
-                <tbody>
-                  <tr v-for="enrollment in filteredPendingEnrollments" :key="enrollment.id">
-                    <td>{{ enrollment.user_name }}</td>
-                    <td>{{ enrollment.user_account }}</td>
-                    <td>{{ formatDateTime(enrollment.created_time) }}</td>
-                    <td>
-                      <div class="face-image-preview">
-                        <img :src="getEnrollmentImageUrl(enrollment.image_path)" alt="äººè„¸ç…§ç‰‡"
-                          @click="showImagePreview(enrollment.image_path)" class="preview-image" />
-                      </div>
-                    </td>
-                    <td>
-                      <button class="clock-btn clock-in" @click="reviewFaceEnrollment(enrollment.id, true)">é€šè¿‡</button>
-                      <button class="clock-btn clock-out"
-                        @click="reviewFaceEnrollment(enrollment.id, false)">æ‹’ç»</button>
-                    </td>
-                  </tr>
-                </tbody>
-              </table>
-              <div v-if="filteredPendingEnrollments.length === 0" class="empty-state">
-                æš‚æ— å¾…å®¡æ ¸çš„ç”³è¯·
-              </div>
+            <table>
+              <thead>
+                <tr>
+                  <th>å§“å</th>
+                  <th>å·¥å·</th>
+                  <th>æäº¤æ—¶é—´</th>
+                  <th>äººè„¸ç…§ç‰‡</th>
+                  <th>æ“ä½œ</th>
+                </tr>
+              </thead>
+              <tbody>
+                <tr v-for="enrollment in filteredPendingEnrollments" :key="enrollment.id">
+                  <td>{{ enrollment.user_name }}</td>
+                  <td>{{ enrollment.user_account }}</td>
+                  <td>{{ formatDateTime(enrollment.created_time) }}</td>
+                  <td>
+                    <div class="face-image-preview">
+                      <img
+                        :src="getEnrollmentImageUrl(enrollment.image_path)"
+                        alt="äººè„¸ç…§ç‰‡"
+                        @click="showImagePreview(enrollment.image_path)"
+                        class="preview-image"
+                      />
+                    </div>
+                  </td>
+                  <td>
+                    <button class="clock-btn clock-in" @click="reviewFaceEnrollment(enrollment.id, true)">é€šè¿‡</button>
+                    <button class="clock-btn clock-out" @click="reviewFaceEnrollment(enrollment.id, false)">æ‹’ç»</button>
+                  </td>
+                </tr>
+              </tbody>
+            </table>
+            <div v-if="filteredPendingEnrollments.length === 0" class="empty-state">
+              æš‚æ— å¾…å®¡æ ¸çš„ç”³è¯·
+            </div>
             </template>
           </div>
 
@@ -334,35 +312,35 @@
           <div v-else class="records-table">
             <div v-if="loadingReviewed" class="loading-state">åŠ è½½ä¸­...</div>
             <template v-else>
-              <table>
-                <thead>
-                  <tr>
-                    <th>å§“å</th>
-                    <th>å·¥å·</th>
-                    <th>æäº¤æ—¶é—´</th>
-                    <th>å®¡æ ¸æ—¶é—´</th>
-                    <th>çŠ¶æ€</th>
-                    <th>å®¡æ ¸æ„è§</th>
-                  </tr>
-                </thead>
-                <tbody>
-                  <tr v-for="enrollment in filteredReviewedEnrollments" :key="enrollment.id">
-                    <td>{{ enrollment.user_name }}</td>
-                    <td>{{ enrollment.user_account }}</td>
-                    <td>{{ formatDateTime(enrollment.created_time) }}</td>
-                    <td>{{ formatDateTime(enrollment.reviewed_time) }}</td>
-                    <td>
-                      <span :class="getFaceEnrollmentStatusClass(enrollment.status)">
-                        {{ getFaceEnrollmentStatusText(enrollment.status) }}
-                      </span>
-                    </td>
-                    <td>{{ enrollment.review_comment || '-' }}</td>
-                  </tr>
-                </tbody>
-              </table>
-              <div v-if="filteredReviewedEnrollments.length === 0" class="empty-state">
-                æš‚æ— å·²å¤„ç†çš„ç”³è¯·
-              </div>
+            <table>
+              <thead>
+                <tr>
+                  <th>å§“å</th>
+                  <th>å·¥å·</th>
+                  <th>æäº¤æ—¶é—´</th>
+                  <th>å®¡æ ¸æ—¶é—´</th>
+                  <th>çŠ¶æ€</th>
+                  <th>å®¡æ ¸æ„è§</th>
+                </tr>
+              </thead>
+              <tbody>
+                <tr v-for="enrollment in filteredReviewedEnrollments" :key="enrollment.id">
+                  <td>{{ enrollment.user_name }}</td>
+                  <td>{{ enrollment.user_account }}</td>
+                  <td>{{ formatDateTime(enrollment.created_time) }}</td>
+                  <td>{{ formatDateTime(enrollment.reviewed_time) }}</td>
+                  <td>
+                    <span :class="getFaceEnrollmentStatusClass(enrollment.status)">
+                      {{ getFaceEnrollmentStatusText(enrollment.status) }}
+                    </span>
+                  </td>
+                  <td>{{ enrollment.review_comment || '-' }}</td>
+                </tr>
+              </tbody>
+            </table>
+            <div v-if="filteredReviewedEnrollments.length === 0" class="empty-state">
+              æš‚æ— å·²å¤„ç†çš„ç”³è¯·
+            </div>
             </template>
           </div>
 
@@ -395,34 +373,7 @@
             </div>
 
             <div class="records-table">
-              <h3>å†å²è¯·å‡ç”³è¯·</h3>
-              <!-- ç”¨æˆ·ç«¯å†å²è¯·å‡è®°å½•é¡µç­¾å’Œæ’åºæ§ä»¶ -->
-              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
-                <!-- 10px * 0.8 -->
-                <div class="tab-switch">
-                  <button :class="{ active: myLeavesTab === 'pending' }"
-                    @click="myLeavesTab = 'pending'; loadMyLeaves(1)">ç”³è¯·ä¸­</button>
-                  <button :class="{ active: myLeavesTab === 'approved' }"
-                    @click="myLeavesTab = 'approved'; loadMyLeaves(1)">å·²é€šè¿‡</button>
-                  <button :class="{ active: myLeavesTab === 'rejected' }"
-                    @click="myLeavesTab = 'rejected'; loadMyLeaves(1)">å·²æ‹’ç»</button>
-                </div>
-
-                <!-- ç”¨æˆ·ç«¯å†å²è¯·å‡è®°å½•æ’åºæ§ä»¶ -->
-                <div class="sort-controls" style="display: flex; align-items: center; gap: 8px;">
-                  <!-- 10px * 0.8 -->
-                  <label>æ’åºæ–¹å¼:</label>
-                  <select v-model="myLeavesSortBy" @change="loadMyLeaves(1)" style="padding: 5px;">
-                    <option value="start_time">èµ·å§‹æ—¶é—´</option>
-                    <option value="end_time">ç»“æŸæ—¶é—´</option>
-                  </select>
-                  <select v-model="myLeavesSortOrder" @change="loadMyLeaves(1)" style="padding: 5px;">
-                    <option value="asc">æ­£åº</option>
-                    <option value="desc">å€’åº</option>
-                  </select>
-                </div>
-              </div>
-
+              <h3>æˆ‘çš„è¯·å‡ç”³è¯·</h3>
               <table>
                 <thead>
                   <tr>
@@ -443,199 +394,65 @@
                   </tr>
                 </tbody>
               </table>
-
-              <!-- åˆ†é¡µæ§ä»¶ -->
-              <div class="pagination" v-if="pagination.myLeaves.total > 0">
-                <button @click="changeMyLeavesPage(pagination.myLeaves.currentPage - 1)"
-                  :disabled="pagination.myLeaves.currentPage === 1" class="pagination-btn">
-                  ä¸Šä¸€é¡µ
-                </button>
-
-                <span v-for="page in generatePageNumbers(pagination.myLeaves.pages, pagination.myLeaves.currentPage)"
-                  :key="page" @click="changeMyLeavesPage(page)"
-                  :class="['pagination-item', { active: page === pagination.myLeaves.currentPage }]">
-                  {{ page }}
-                </span>
-
-                <button @click="changeMyLeavesPage(pagination.myLeaves.currentPage + 1)"
-                  :disabled="pagination.myLeaves.currentPage === pagination.myLeaves.pages" class="pagination-btn">
-                  ä¸‹ä¸€é¡µ
-                </button>
-
-                <span class="pagination-info">
-                  å…± {{ pagination.myLeaves.total }} æ¡è®°å½•ï¼Œç¬¬ {{ pagination.myLeaves.currentPage }} / {{
-                    pagination.myLeaves.pages }} é¡µ
-                </span>
-              </div>
             </div>
           </template>
           <template v-else>
             <h2>è¯·å‡å®¡æ ¸</h2>
             <div class="tab-switch">
-              <button :class="{ active: leaveAdminTab === 'unprocessed' }"
-                @click="leaveAdminTab = 'unprocessed'; loadAdminLeaves(false)">
+              <button
+                :class="{ active: leaveAdminTab === 'unprocessed' }"
+                @click="leaveAdminTab = 'unprocessed'; loadAdminLeaves(false)"
+              >
                 æœªå¤„ç†
               </button>
-              <button :class="{ active: leaveAdminTab === 'processed' }"
-                @click="leaveAdminTab = 'processed'; loadAdminLeaves(true)">
+              <button
+                :class="{ active: leaveAdminTab === 'processed' }"
+                @click="leaveAdminTab = 'processed'; loadAdminLeaves(true)"
+              >
                 å·²å¤„ç†
               </button>
             </div>
 
             <!-- ç­›é€‰æ§ä»¶ -->
-            <div class="filter-controls"
-              style="margin: 12px 0; display: flex; justify-content: space-between; align-items: center;">
-              <!-- 15px * 0.8 -->
-              <div>
-                <input type="text" v-model="nameFilter" placeholder="æœç´¢å§“å" style="margin-right: 8px; padding: 5px;" />
-                <!-- 10px * 0.8 -->
-                <select v-model="typeFilter" style="padding: 5px;">
-                  <option value="-1">å…¨éƒ¨ç±»å‹</option>
-                  <option v-for="type in leaveTypes" :key="type.value" :value="type.value">{{ type.label }}</option>
-                </select>
-              </div>
-              <div v-if="leaveAdminTab === 'unprocessed'">
-                <button class="batch-process-btn" @click="toggleBatchMode" v-if="!isBatchMode">
-                  æ‰¹é‡å¤„ç†
-                </button>
-                <div v-else style="display: flex; gap: 8px;">
-                  <!-- 10px * 0.8 -->
-                  <button class="batch-btn batch-approve" @click="batchReview('approve')"
-                    :disabled="isBatchProcessing || selectedLeaves.length === 0">
-                    {{ isBatchProcessing ? 'å¤„ç†ä¸­' : 'æ‰¹é‡é€šè¿‡' }}
-                  </button>
-                  <button class="batch-btn batch-reject" @click="batchReview('reject')"
-                    :disabled="isBatchProcessing || selectedLeaves.length === 0">
-                    {{ isBatchProcessing ? 'å¤„ç†ä¸­' : 'æ‰¹é‡æ‹’ç»' }}
-                  </button>
-                  <button class="batch-btn batch-exit" @click="toggleBatchMode">
-                    é€€å‡º
-                  </button>
-                </div>
-              </div>
+            <div class="filter-controls" style="margin: 15px 0;">
+              <input type="text" v-model="nameFilter" placeholder="æœç´¢å§“å" style="margin-right: 10px; padding: 5px;" />
+              <select v-model="typeFilter" style="padding: 5px;">
+                <option value="-1">å…¨éƒ¨ç±»å‹</option>
+                <option v-for="type in leaveTypes" :key="type.value" :value="type.value">{{ type.label }}</option>
+              </select>
             </div>
 
-            <!-- æœªå¤„ç†æ ‡ç­¾é¡µå†…å®¹ -->
             <div class="records-table" v-if="leaveAdminTab === 'unprocessed'">
               <table>
                 <thead>
                   <tr>
-                    <th v-if="!isBatchMode">æ“ä½œ</th>
-                    <th v-else>é€‰æ‹©</th>
                     <th>å§“å</th>
                     <th>å·¥å·</th>
                     <th>èµ·å§‹æ—¶é—´</th>
                     <th>ç»“æŸæ—¶é—´</th>
                     <th>äº‹ç”±</th>
                     <th>è¯·å‡ç±»å‹</th>
+                    <th>æ“ä½œ</th>
                   </tr>
                 </thead>
                 <tbody>
-                  <tr v-for="item in filteredUnprocessedLeaves" :key="item.id">
+                  <tr v-for="item in filteredUnprocessedLeaves" :key="item.id" @click="selectedLeave = item">
                     <td>{{ item.name }}</td>
                     <td>{{ item.account }}</td>
                     <td>{{ formatDateTime(item.start_time) }}</td>
                     <td>{{ formatDateTime(item.end_time) }}</td>
-                    <td @click="selectedLeave = item" class="reason-cell">{{ item.reason }}</td>
+                    <td>{{ item.reason }}</td>
                     <td>{{ getLeaveTypeLabel(item.absence_type) }}</td>
-                    <td v-if="!isBatchMode">
+                    <td>
                       <button class="clock-btn clock-in" @click.stop="reviewLeave(item.id, 'approve')">é€šè¿‡</button>
                       <button class="clock-btn clock-out" @click.stop="reviewLeave(item.id, 'reject')">æ‹’ç»</button>
                     </td>
-                    <td v-else>
-                      <input type="checkbox" v-model="selectedLeaves" :value="item.id" class="batch-checkbox">
-                    </td>
-                  </tr>
-                </tbody>
-              </table>
-
-              <!-- æœªå¤„ç†åˆ†é¡µæ§ä»¶ -->
-              <div class="pagination" v-if="pagination.adminLeaves.unprocessed.total > 0 && !isBatchMode">
-                <button
-                  @click="changeAdminLeavesPage(false, Math.max(1, pagination.adminLeaves.unprocessed.currentPage - 1))"
-                  :disabled="pagination.adminLeaves.unprocessed.currentPage === 1" class="pagination-btn">
-                  ä¸Šä¸€é¡µ
-                </button>
-
-                <span
-                  v-for="page in generatePageNumbers(pagination.adminLeaves.unprocessed.pages, pagination.adminLeaves.unprocessed.currentPage)"
-                  :key="page" @click="changeAdminLeavesPage(false, page)"
-                  :class="['pagination-item', { active: page === pagination.adminLeaves.unprocessed.currentPage }]">
-                  {{ page }}
-                </span>
-
-                <button
-                  @click="changeAdminLeavesPage(false, Math.min(pagination.adminLeaves.unprocessed.pages, pagination.adminLeaves.unprocessed.currentPage + 1))"
-                  :disabled="pagination.adminLeaves.unprocessed.currentPage === pagination.adminLeaves.unprocessed.pages"
-                  class="pagination-btn">
-                  ä¸‹ä¸€é¡µ
-                </button>
-
-                <span class="pagination-info">
-                  å…±ç­›é€‰åˆ° {{ pagination.adminLeaves.unprocessed.total }} æ¡è®°å½•ï¼Œç¬¬ {{
-                    pagination.adminLeaves.unprocessed.currentPage }} / {{ pagination.adminLeaves.unprocessed.pages }} é¡µ
-                </span>
-              </div>
-            </div>
-
-            <!-- å·²é€šè¿‡æ ‡ç­¾é¡µå†…å®¹ -->
-            <div class="records-table" v-else-if="leaveAdminTab === 'approved'">
-              <table>
-                <thead>
-                  <tr>
-                    <th>å§“å</th>
-                    <th>å·¥å·</th>
-                    <th>èµ·å§‹æ—¶é—´</th>
-                    <th>ç»“æŸæ—¶é—´</th>
-                    <th>äº‹ç”±</th>
-                    <th>è¯·å‡ç±»å‹</th>
-                    <th>çŠ¶æ€</th>
-                  </tr>
-                </thead>
-                <tbody>
-                  <tr v-for="item in filteredApprovedLeaves" :key="item.id">
-                    <td>{{ item.name }}</td>
-                    <td>{{ item.account }}</td>
-                    <td>{{ formatDateTime(item.start_time) }}</td>
-                    <td>{{ formatDateTime(item.end_time) }}</td>
-                    <td>{{ item.reason }}</td>
-                    <td>{{ getLeaveTypeLabel(item.absence_type) }}</td>
-                    <td>{{ statusMap[item.status] || item.status }}</td>
                   </tr>
                 </tbody>
               </table>
-
-              <!-- å·²é€šè¿‡åˆ†é¡µæ§ä»¶ -->
-              <div class="pagination" v-if="pagination.adminLeaves.approved.total > 0 && !isBatchMode">
-                <button
-                  @click="changeAdminLeavesPage('approved', Math.max(1, pagination.adminLeaves.approved.currentPage - 1))"
-                  :disabled="pagination.adminLeaves.approved.currentPage === 1" class="pagination-btn">
-                  ä¸Šä¸€é¡µ
-                </button>
-
-                <span
-                  v-for="page in generatePageNumbers(pagination.adminLeaves.approved.pages, pagination.adminLeaves.approved.currentPage)"
-                  :key="page" @click="changeAdminLeavesPage('approved', page)"
-                  :class="['pagination-item', { active: page === pagination.adminLeaves.approved.currentPage }]">
-                  {{ page }}
-                </span>
-
-                <button
-                  @click="changeAdminLeavesPage('approved', Math.min(pagination.adminLeaves.approved.pages, pagination.adminLeaves.approved.currentPage + 1))"
-                  :disabled="pagination.adminLeaves.approved.currentPage === pagination.adminLeaves.approved.pages"
-                  class="pagination-btn">
-                  ä¸‹ä¸€é¡µ
-                </button>
-
-                <span class="pagination-info">
-                  å…±ç­›é€‰åˆ° {{ pagination.adminLeaves.approved.total }} æ¡è®°å½•ï¼Œç¬¬ {{
-                    pagination.adminLeaves.approved.currentPage }} / {{ pagination.adminLeaves.approved.pages }} é¡µ
-                </span>
-              </div>
             </div>
 
-            <!-- å·²æ‹’ç»æ ‡ç­¾é¡µå†…å®¹ -->
-            <div class="records-table" v-else-if="leaveAdminTab === 'rejected'">
+            <div class="records-table" v-else>
               <table>
                 <thead>
                   <tr>
@@ -649,7 +466,7 @@
                   </tr>
                 </thead>
                 <tbody>
-                  <tr v-for="item in filteredRejectedLeaves" :key="item.id">
+                  <tr v-for="item in filteredProcessedLeaves" :key="item.id">
                     <td>{{ item.name }}</td>
                     <td>{{ item.account }}</td>
                     <td>{{ formatDateTime(item.start_time) }}</td>
@@ -660,34 +477,6 @@
                   </tr>
                 </tbody>
               </table>
-
-              <!-- å·²æ‹’ç»åˆ†é¡µæ§ä»¶ -->
-              <div class="pagination" v-if="pagination.adminLeaves.rejected.total > 0 && !isBatchMode">
-                <button
-                  @click="changeAdminLeavesPage('rejected', Math.max(1, pagination.adminLeaves.rejected.currentPage - 1))"
-                  :disabled="pagination.adminLeaves.rejected.currentPage === 1" class="pagination-btn">
-                  ä¸Šä¸€é¡µ
-                </button>
-
-                <span
-                  v-for="page in generatePageNumbers(pagination.adminLeaves.rejected.pages, pagination.adminLeaves.rejected.currentPage)"
-                  :key="page" @click="changeAdminLeavesPage('rejected', page)"
-                  :class="['pagination-item', { active: page === pagination.adminLeaves.rejected.currentPage }]">
-                  {{ page }}
-                </span>
-
-                <button
-                  @click="changeAdminLeavesPage('rejected', Math.min(pagination.adminLeaves.rejected.pages, pagination.adminLeaves.rejected.currentPage + 1))"
-                  :disabled="pagination.adminLeaves.rejected.currentPage === pagination.adminLeaves.rejected.pages"
-                  class="pagination-btn">
-                  ä¸‹ä¸€é¡µ
-                </button>
-
-                <span class="pagination-info">
-                  å…±ç­›é€‰åˆ° {{ pagination.adminLeaves.rejected.total }} æ¡è®°å½•ï¼Œç¬¬ {{
-                    pagination.adminLeaves.rejected.currentPage }} / {{ pagination.adminLeaves.rejected.pages }} é¡µ
-                </span>
-              </div>
             </div>
 
             <div v-if="selectedLeave" class="leave-detail">
@@ -708,8 +497,7 @@
 </template>
 
 <script>
-import * as echarts from 'echarts';
-import { ElMessage } from 'element-plus';
+import { ElMessage } from 'element-plus'
 
 export default {
   name: 'AdminPage',
@@ -752,102 +540,80 @@ export default {
         { value: 2, label: 'å…¬äº‹è¯·å‡' }
       ],
       myLeaves: [],
-      // ç”¨æˆ·ç«¯å†å²è¯·å‡è®°å½•é¡µç­¾
-      myLeavesTab: 'pending', // pending: ç”³è¯·ä¸­(æœªè¯»), approved: å·²é€šè¿‡, rejected: å·²æ‹’ç»
-      // ç”¨æˆ·ç«¯å†å²è¯·å‡è®°å½•æ’åº
-      myLeavesSortBy: 'start_time', // é»˜è®¤æŒ‰èµ·å§‹æ—¶é—´æ’åº
-      myLeavesSortOrder: 'desc', // é»˜è®¤å€’åº
       leaveMessage: '',
       leaveMessageType: '',
       statusMap: { 0: 'æœªè¯»', 1: 'æ‹’ç»', 2: 'é€šè¿‡' },
       leaveAdminTab: 'unprocessed',
       adminLeavesUnprocessed: [],
       adminLeavesProcessed: [],
-      adminLeavesApproved: [],  // å·²é€šè¿‡çš„è¯·å‡ç”³è¯·
-      adminLeavesRejected: [],  // å·²æ‹’ç»çš„è¯·å‡ç”³è¯·
       selectedLeave: null,
       nameFilter: '',
-      typeFilter: -1, // -1è¡¨ç¤ºå…¨éƒ¨ç±»å‹
-      currentPage: 1,
-      pageSize: 10,
-      totalEmployees: 0,
-      jumpToPage: 1,
-      // åˆ†é¡µç›¸å…³æ•°æ®
-      pagination: {
-        myLeaves: {
-          currentPage: 1,
-          total: 0,
-          pages: 0,
-          perPage: 10
-        },
-        adminLeaves: {
-          unprocessed: {
-            currentPage: 1,
-            total: 0,
-            pages: 0,
-            perPage: 10
-          },
-          processed: {
-            currentPage: 1,
-            total: 0,
-            pages: 0,
-            perPage: 10
-          },
-          approved: {
-            currentPage: 1,
-            total: 0,
-            pages: 0,
-            perPage: 10
-          },
-          rejected: {
-            currentPage: 1,
-            total: 0,
-            pages: 0,
-            perPage: 10
-          }
-        }
-      },
-      // æ‰¹é‡å¤„ç†ç›¸å…³çŠ¶æ€
-      isBatchProcessing: false,
-      isBatchMode: false,
-      selectedLeaves: [] // é€‰ä¸­çš„è¯·å‡ç”³è¯·IDæ•°ç»„
+      typeFilter: -1,
+
+      // äººè„¸å®¡æ ¸ç›¸å…³
+      faceReviewTab: 'pending',
+      faceNameFilter: '',
+      faceStatusFilter: -1,
+      pendingFaceEnrollments: [],
+      reviewedFaceEnrollments: [],
+      showPreview: false,
+      previewImageUrl: '',
+      loadingPending: false,
+      loadingReviewed: false,
     }
   },
-  watch: {
-    activeTab(newTab) {
-      if (newTab === 'dashboard' && this.userProfile.role === 'ç®¡ç†å‘˜') {
-        this.$nextTick(() => {
-          this.renderAttendanceCharts();
-        });
-      }
+
+  computed: {
+    // è¿‡æ»¤åçš„å¾…å®¡æ ¸ç”³è¯·
+    filteredPendingEnrollments() {
+      return this.pendingFaceEnrollments.filter(enrollment => {
+        return enrollment.user_name.toLowerCase().includes(this.faceNameFilter.toLowerCase()) ||
+               enrollment.user_account.toLowerCase().includes(this.faceNameFilter.toLowerCase())
+      })
     },
-    // ç›‘å¬nameFilterå˜åŒ–
-    nameFilter(newVal, oldVal) {
-      if (newVal !== oldVal) {
-        this.resetAndRecalculatePagination();
-      }
+
+    // è¿‡æ»¤åçš„å·²å®¡æ ¸ç”³è¯·
+    filteredReviewedEnrollments() {
+      return this.reviewedFaceEnrollments.filter(enrollment => {
+        const nameMatch = enrollment.user_name.toLowerCase().includes(this.faceNameFilter.toLowerCase()) ||
+                         enrollment.user_account.toLowerCase().includes(this.faceNameFilter.toLowerCase())
+        const statusMatch = this.faceStatusFilter === -1 || enrollment.status === this.faceStatusFilter
+        return nameMatch && statusMatch
+      })
     },
-    // ç›‘å¬typeFilterå˜åŒ–
-    typeFilter(newVal, oldVal) {
-      if (newVal !== oldVal) {
-        this.resetAndRecalculatePagination();
-      }
+
+    // è¿‡æ»¤åçš„å¾…å®¡æ‰¹è¯·å‡åˆ—è¡¨
+    filteredUnprocessedLeaves() {
+      return this.adminLeavesUnprocessed.filter(leave => {
+        const nameMatch = leave.name.toLowerCase().includes(this.nameFilter.toLowerCase())
+        const typeMatch = this.typeFilter === -1 || leave.absence_type === this.typeFilter
+        return nameMatch && typeMatch
+      })
+    },
+
+    // è¿‡æ»¤åçš„å·²å®¡æ‰¹è¯·å‡åˆ—è¡¨
+    filteredProcessedLeaves() {
+      return this.adminLeavesProcessed.filter(leave => {
+        const nameMatch = leave.name.toLowerCase().includes(this.nameFilter.toLowerCase())
+        const typeMatch = this.typeFilter === -1 || leave.absence_type === this.typeFilter
+        return nameMatch && typeMatch
+      })
     },
   },
+
   async mounted() {
     this.updateTime()
     setInterval(this.updateTime, 1000)
 
-    await this.loadUserProfile();
+    await this.loadUserProfile()
+
+    // æ ¹æ®ç”¨æˆ·è§’è‰²è®¾ç½®é»˜è®¤tab
     if (this.userProfile.role === 'ç®¡ç†å‘˜') {
-      this.activeTab = 'dashboard';
-      await this.loadDashboardData();
-      this.$nextTick(() => {
-        this.renderAttendanceCharts();
-      });
+      this.activeTab = 'dashboard'
+      await this.loadDashboardData()
     } else {
-      this.activeTab = 'personal';
-      await this.loadPersonalData();
+      this.activeTab = 'personal'
+      await this.loadPersonalData()
     }
 
     // å¦‚æœäººè„¸è¯†åˆ«å®Œè·³å›æ¥ï¼Œè‡ªåŠ¨æ‰“å¡
@@ -859,18 +625,6 @@ export default {
   },
 
   methods: {
-    // é‡ç½®åˆ†é¡µåˆ°ç¬¬ä¸€é¡µ
-    resetPagination() {
-      if (this.leaveAdminTab === 'unprocessed') {
-        this.pagination.adminLeaves.unprocessed.currentPage = 1;
-      } else if (this.leaveAdminTab === 'approved') {
-        this.pagination.adminLeaves.approved.currentPage = 1;
-      } else if (this.leaveAdminTab === 'rejected') {
-        this.pagination.adminLeaves.rejected.currentPage = 1;
-      } else {
-        this.pagination.adminLeaves.processed.currentPage = 1;
-      }
-    },
     goFace(type) {
       this.$router.push({ name: 'FaceClock', params: { type } })
     },
@@ -896,57 +650,13 @@ export default {
         this.switchFaceReviewTab('pending')
       } else if (tab === 'leave') {
         if (this.userProfile.role === 'å‘˜å·¥') {
-          // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
-          this.pagination.myLeaves.currentPage = 1
-          this.loadMyLeaves(1)
+          this.loadMyLeaves()
         } else {
-          // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
-          this.pagination.adminLeaves.unprocessed.currentPage = 1
-          this.loadAdminLeaves(false, 1)
+          this.loadAdminLeaves(false)
         }
       }
     },
 
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
     // åˆ‡æ¢äººè„¸å®¡æ ¸æ ‡ç­¾é¡µ
     switchFaceReviewTab(tab) {
       this.faceReviewTab = tab
@@ -1247,116 +957,40 @@ export default {
       }
     },
 
-    async loadMyLeaves(page = 1) {
+    async loadMyLeaves() {
       try {
         const token = localStorage.getItem('access_token')
-        // æ ¹æ®å½“å‰é¡µç­¾ç¡®å®šçŠ¶æ€å‚æ•°
-        let statusParam = '';
-        if (this.myLeavesTab === 'pending') {
-          statusParam = '&status=0'; // æœªè¯»
-        } else if (this.myLeavesTab === 'approved') {
-          statusParam = '&status=2'; // å·²é€šè¿‡
-        } else if (this.myLeavesTab === 'rejected') {
-          statusParam = '&status=1'; // å·²æ‹’ç»
-        }
-
-        // æ·»åŠ æ’åºå‚æ•°
-        const sortParam = `&sort_by=${this.myLeavesSortBy}&order=${this.myLeavesSortOrder}`;
-
-        const res = await fetch(`${this.apiBaseUrl}/absence/personal?page=${page}${statusParam}${sortParam}`, {
+        const res = await fetch(`${this.apiBaseUrl}/absence/personal`, {
           headers: { 'Authorization': `Bearer ${token}` }
         })
         const data = await res.json()
         if (res.ok) {
           this.myLeaves = data.absences || []
-          // æ›´æ–°åˆ†é¡µä¿¡æ¯
-          this.pagination.myLeaves.currentPage = data.current_page || 1
-          this.pagination.myLeaves.total = data.total || 0
-          this.pagination.myLeaves.pages = data.pages || 0
-          this.pagination.myLeaves.perPage = data.per_page || 5
         }
       } catch (e) {
         console.error(e)
       }
     },
 
-    async loadAdminLeaves(processed, page = 1, status = null) {
+    async loadAdminLeaves(processed) {
       try {
         const token = localStorage.getItem('access_token')
-        // æ„å»ºæŸ¥è¯¢å‚æ•°
-        let queryParams = `page=${page}`
-
-        // æ ¹æ®statuså‚æ•°å†³å®šæŸ¥è¯¢æ¡ä»¶
-        if (status !== null) {
-          // æŒ‰å…·ä½“çŠ¶æ€æŸ¥è¯¢ï¼ˆå·²é€šè¿‡/å·²æ‹’ç»ï¼‰
-          queryParams += `&status=${status}`
-        } else {
-          // å…¼å®¹æ—§çš„processedå‚æ•°
-          queryParams += `&processed=${processed ? 'true' : 'false'}`
-        }
-
-        // æ·»åŠ è¿‡æ»¤å‚æ•°
-        if (this.nameFilter) {
-          queryParams += `&name=${encodeURIComponent(this.nameFilter)}`
-        }
-        if (this.typeFilter !== -1 && this.typeFilter !== '-1') {
-          queryParams += `&absence_type=${this.typeFilter}`
-        }
-
-        // ä½¿ç”¨åç«¯åˆ†é¡µå’Œè¿‡æ»¤ï¼Œæ¯é¡µ5æ¡è®°å½•
-        const res = await fetch(`${this.apiBaseUrl}/admin/absence?${queryParams}`, {
+        const res = await fetch(`${this.apiBaseUrl}/admin/absence?processed=${processed ? 'true' : 'false'}`, {
           headers: { 'Authorization': `Bearer ${token}` }
         })
         const data = await res.json()
         if (res.ok) {
-          if (status === 2) {
-            // å·²é€šè¿‡çš„è¯·å‡ç”³è¯·
-            this.adminLeavesApproved = data.absences || []
-            // ä½¿ç”¨åç«¯è¿”å›çš„åˆ†é¡µä¿¡æ¯
-            this.pagination.adminLeaves.approved.currentPage = data.current_page || 1
-            this.pagination.adminLeaves.approved.total = data.total || 0
-            this.pagination.adminLeaves.approved.pages = data.pages || 0
-            this.pagination.adminLeaves.approved.perPage = data.per_page || 5
-          } else if (status === 1) {
-            // å·²æ‹’ç»çš„è¯·å‡ç”³è¯·
-            this.adminLeavesRejected = data.absences || []
-            // ä½¿ç”¨åç«¯è¿”å›çš„åˆ†é¡µä¿¡æ¯
-            this.pagination.adminLeaves.rejected.currentPage = data.current_page || 1
-            this.pagination.adminLeaves.rejected.total = data.total || 0
-            this.pagination.adminLeaves.rejected.pages = data.pages || 0
-            this.pagination.adminLeaves.rejected.perPage = data.per_page || 5
-          } else if (processed) {
-            // æ—§çš„å·²å¤„ç†é€»è¾‘ï¼ˆå…¼å®¹ï¼‰
-            this.adminLeavesProcessed = data.absences || []
-            // ä½¿ç”¨åç«¯è¿”å›çš„åˆ†é¡µä¿¡æ¯
-            this.pagination.adminLeaves.processed.currentPage = data.current_page || 1
-            this.pagination.adminLeaves.processed.total = data.total || 0
-            this.pagination.adminLeaves.processed.pages = data.pages || 0
-            this.pagination.adminLeaves.processed.perPage = data.per_page || 5
-          } else {
-            this.adminLeavesUnprocessed = data.absences || []
-            // ä½¿ç”¨åç«¯è¿”å›çš„åˆ†é¡µä¿¡æ¯
-            this.pagination.adminLeaves.unprocessed.currentPage = data.current_page || 1
-            this.pagination.adminLeaves.unprocessed.total = data.total || 0
-            this.pagination.adminLeaves.unprocessed.pages = data.pages || 0
-            this.pagination.adminLeaves.unprocessed.perPage = data.per_page || 5
-          }
+          if (processed) this.adminLeavesProcessed = data.absences || []
+          else this.adminLeavesUnprocessed = data.absences || []
         }
-      } catch (e) { console.error(e) }
+      } catch (e) {
+        console.error(e)
+      }
     },
 
     async reviewLeave(id, decision) {
       try {
-        // æ·»åŠ æŒ‰é’®ç‚¹å‡»åé¦ˆ
-        console.log('å®¡æ ¸æŒ‰é’®è¢«ç‚¹å‡»ï¼ŒID:', id, 'å†³å®š:', decision);
-
-        const token = localStorage.getItem('access_token');
-        if (!token) {
-          alert('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
-          this.$router.push('/');
-          return;
-        }
-
+        const token = localStorage.getItem('access_token')
         const res = await fetch(`${this.apiBaseUrl}/admin/absence/${id}`, {
           method: 'PATCH',
           headers: {
@@ -1364,216 +998,19 @@ export default {
             'Authorization': `Bearer ${token}`
           },
           body: JSON.stringify({ decision })
-        });
-
-        const data = await res.json();
-
+        })
+        const data = await res.json()
         if (res.ok) {
-          // å®¡æ ¸ååˆ·æ–°åˆ—è¡¨ï¼Œä¿æŒå½“å‰é¡µç 
-          const isProcessed = this.leaveAdminTab === 'processed';
-          const currentPage = isProcessed ?
-            this.pagination.adminLeaves.processed.currentPage :
-            this.pagination.adminLeaves.unprocessed.currentPage;
-
-          // é‡æ–°åŠ è½½æœªå¤„ç†åˆ—è¡¨ï¼ˆå› ä¸ºå½“å‰è®°å½•ä¼šè¢«ç§»åˆ°å·²å¤„ç†åˆ—è¡¨ï¼‰
-          this.loadAdminLeaves(false, currentPage);
-
-          // å¦‚æœå½“å‰åœ¨å·²å¤„ç†æ ‡ç­¾é¡µï¼Œä¹Ÿåˆ·æ–°å·²å¤„ç†åˆ—è¡¨
-          if (this.leaveAdminTab === 'processed') {
-            this.loadAdminLeaves(true, this.pagination.adminLeaves.processed.currentPage);
-          }
-
-          this.selectedLeave = null;
+          // å®¡æ ¸ååˆ·æ–°åˆ—è¡¨
+          this.loadAdminLeaves(this.leaveAdminTab === 'processed')
+          this.selectedLeave = null
           // åŒæ­¥åˆ·æ–°ä¸ªäººè€ƒå‹¤ï¼ˆå¦‚æœæ¶‰åŠåˆ°æœ¬äººï¼‰
-          this.loadPersonalData();
+          this.loadPersonalData()
         } else {
-          // æœåŠ¡å™¨è¿”å›é”™è¯¯
-          alert(data.message || 'æ“ä½œå¤±è´¥ï¼šæœåŠ¡å™¨è¿”å›é”™è¯¯');
-          console.error('å®¡æ ¸å¤±è´¥:', data);
+          alert(data.message || 'æ“ä½œå¤±è´¥')
         }
       } catch (e) {
-        // ç½‘ç»œæˆ–å…¶ä»–é”™è¯¯
-        alert('æ“ä½œå¤±è´¥ï¼šç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å™¨å¼‚å¸¸');
-        console.error('å®¡æ ¸è¯·å‡æ—¶å‘ç”Ÿé”™è¯¯:', e);
-      }
-    },
-
-    // åˆ‡æ¢æ‰¹é‡æ¨¡å¼
-    toggleBatchMode() {
-      this.isBatchMode = !this.isBatchMode;
-      this.selectedLeaves = []; // æ¸…ç©ºé€‰ä¸­åˆ—è¡¨
-
-      if (this.isBatchMode) {
-        this.loadAllUnprocessedLeaves();
-      } else {
-        this.loadAdminLeaves(false, 1); // æ¢å¤æ­£å¸¸åˆ†é¡µ
-      }
-    },
-
-    // åŠ è½½æ‰€æœ‰æœªå¤„ç†çš„è¯·å‡ç”³è¯·ï¼ˆä¸åˆ†é¡µï¼‰
-    async loadAllUnprocessedLeaves() {
-      try {
-        const token = localStorage.getItem('access_token');
-        if (!token) {
-          alert('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
-          this.$router.push('/');
-          return;
-        }
-
-        // è·å–æ‰€æœ‰æœªå¤„ç†çš„è¯·å‡ç”³è¯·ï¼ˆä¸åˆ†é¡µï¼Œæ˜¾ç¤ºå…¨éƒ¨ï¼‰
-        const res = await fetch(`${this.apiBaseUrl}/admin/absence?processed=false&page=1&page_size=10000`, {
-          method: 'GET',
-          headers: {
-            'Authorization': `Bearer ${token}`
-          }
-        });
-
-        if (res.ok) {
-          const data = await res.json();
-          const absences = data.absences || [];
-
-          if (absences.length === 0) {
-            alert('æ²¡æœ‰æœªå¤„ç†çš„è¯·å‡ç”³è¯·');
-            this.isBatchMode = false;
-            return;
-          }
-
-          // åœ¨æ‰¹é‡æ¨¡å¼ä¸‹æ˜¾ç¤ºæ‰€æœ‰è®°å½•åˆ°ä¸€é¡µä¸­
-          this.adminLeavesUnprocessed = absences;
-          this.pagination.adminLeaves.unprocessed.currentPage = 1;
-          this.pagination.adminLeaves.unprocessed.total = absences.length;
-          this.pagination.adminLeaves.unprocessed.pages = 1;
-          this.pagination.adminLeaves.unprocessed.perPage = absences.length;
-
-        } else {
-          const errorData = await res.json();
-          alert(errorData.message || 'è·å–æœªå¤„ç†ç”³è¯·å¤±è´¥');
-          this.isBatchMode = false;
-        }
-      } catch (error) {
-        console.error('è·å–æœªå¤„ç†ç”³è¯·å¤±è´¥:', error);
-        alert('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
-        this.isBatchMode = false;
-      }
-    },
-
-    // æ‰¹é‡å®¡æ ¸è¯·å‡ç”³è¯·
-    async batchReview(decision) {
-      if (this.isBatchProcessing || this.selectedLeaves.length === 0) return;
-
-      this.isBatchProcessing = true;
-
-      try {
-        const token = localStorage.getItem('access_token');
-        if (!token) {
-          alert('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
-          this.$router.push('/');
-          return;
-        }
-
-        // ç¡®è®¤æ‰¹é‡å¤„ç†
-        const confirmMessage = `ç¡®å®šè¦æ‰¹é‡${decision === 'approve' ? 'é€šè¿‡' : 'æ‹’ç»'} ${this.selectedLeaves.length} æ¡è¯·å‡ç”³è¯·å—ï¼Ÿ`;
-        if (!confirm(confirmMessage)) {
-          this.isBatchProcessing = false;
-          return;
-        }
-
-        // ä½¿ç”¨æ‰¹é‡APIå¤„ç†é€‰ä¸­çš„è¯·å‡ç”³è¯·
-        const batchRes = await fetch(`${this.apiBaseUrl}/admin/absence/batch`, {
-          method: 'PATCH',
-          headers: {
-            'Content-Type': 'application/json',
-            'Authorization': `Bearer ${token}`
-          },
-          body: JSON.stringify({
-            decision: decision,
-            absence_ids: this.selectedLeaves
-          })
-        });
-
-        if (batchRes.ok) {
-          const result = await batchRes.json();
-          alert(result.message);
-
-          // å¤„ç†æˆåŠŸåé‡æ–°åŠ è½½æ•°æ®
-          this.selectedLeaves = [];
-          this.loadAllUnprocessedLeaves();
-
-        } else {
-          const errorData = await batchRes.json();
-          alert(errorData.message || 'æ‰¹é‡å¤„ç†å¤±è´¥');
-        }
-      } catch (error) {
-        console.error('æ‰¹é‡å¤„ç†è¯·å‡ç”³è¯·å¤±è´¥:', error);
-        alert('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
-      } finally {
-        this.isBatchProcessing = false;
-      }
-    },
-
-    // åˆ†é¡µç›¸å…³æ–¹æ³•
-    changeMyLeavesPage(page) {
-      if (page >= 1 && page <= this.pagination.myLeaves.pages) {
-        this.loadMyLeaves(page)
-      }
-    },
-
-    changeAdminLeavesPage(processed, page) {
-      let paginationKey, status;
-
-      // æ ¹æ®æ ‡ç­¾é¡µç¡®å®šåˆ†é¡µé”®å’ŒçŠ¶æ€å‚æ•°
-      if (this.leaveAdminTab === 'approved') {
-        paginationKey = 'approved';
-        status = 2; // å·²é€šè¿‡
-      } else if (this.leaveAdminTab === 'rejected') {
-        paginationKey = 'rejected';
-        status = 1; // å·²æ‹’ç»
-      } else {
-        paginationKey = processed ? 'processed' : 'unprocessed';
-        status = null; // ä½¿ç”¨processedå‚æ•°
-      }
-
-      if (page >= 1 && page <= this.pagination.adminLeaves[paginationKey].pages) {
-        // å¯¹äºapprovedå’Œrejectedæ ‡ç­¾é¡µï¼Œä½¿ç”¨statuså‚æ•°
-        if (status !== null) {
-          this.loadAdminLeaves(null, page, status);
-        } else {
-          // å¯¹äºå…¶ä»–æ ‡ç­¾é¡µï¼Œä¿æŒåŸæœ‰é€»è¾‘
-          this.loadAdminLeaves(processed, page);
-        }
-      }
-    },
-
-    // ç”Ÿæˆé¡µç æ•°ç»„
-    generatePageNumbers(totalPages, currentPage, maxVisible = 5) {
-      const pages = []
-      let start = Math.max(1, currentPage - Math.floor(maxVisible / 2))
-      let end = Math.min(totalPages, start + maxVisible - 1)
-
-      if (end - start + 1 < maxVisible) {
-        start = Math.max(1, end - maxVisible + 1)
-      }
-
-      for (let i = start; i <= end; i++) {
-        pages.push(i)
-      }
-      return pages
-    },
-
-    // é‡ç½®åˆ†é¡µåˆ°ç¬¬ä¸€é¡µ
-    resetAndRecalculatePagination() {
-      if (this.leaveAdminTab === 'unprocessed') {
-        this.pagination.adminLeaves.unprocessed.currentPage = 1;
-        this.loadAdminLeaves(false, 1);
-      } else if (this.leaveAdminTab === 'approved') {
-        this.pagination.adminLeaves.approved.currentPage = 1;
-        this.loadAdminLeaves(null, 1, 2); // å·²é€šè¿‡
-      } else if (this.leaveAdminTab === 'rejected') {
-        this.pagination.adminLeaves.rejected.currentPage = 1;
-        this.loadAdminLeaves(null, 1, 1); // å·²æ‹’ç»
-      } else {
-        this.pagination.adminLeaves.processed.currentPage = 1;
-        this.loadAdminLeaves(true, 1);
+        console.error(e)
       }
     },
 
@@ -1651,174 +1088,11 @@ export default {
     },
 
     getLeaveTypeLabel(type) {
-      const leaveType = this.leaveTypes.find(t => t.value === type);
-      return leaveType ? leaveType.label : 'æœªçŸ¥ç±»å‹';
-    },
-    handlePageChange(newPage) {
-      this.currentPage = newPage; // æ›´æ–°å½“å‰é¡µç 
-      this.loadEmployeesData(); // é‡æ–°åŠ è½½æ•°æ®
-    },
-
-    handlePageJump() {
-      // ç¡®ä¿è·³è½¬çš„é¡µç åœ¨æœ‰æ•ˆèŒƒå›´å†…
-      if (this.jumpToPage >= 1 && this.jumpToPage <= Math.ceil(this.totalEmployees / this.pageSize)) {
-        this.currentPage = this.jumpToPage;
-        this.loadEmployeesData();
-      } else {
-        alert("è¯·è¾“å…¥æœ‰æ•ˆçš„é¡µç ï¼");
-      }
-    },
-
-    renderAttendanceChart() {
-      const chartDom = document.getElementById('attendance-chart');
-      const myChart = echarts.init(chartDom);
-      const option = {
-        title: {
-          text: 'æœ¬æœˆè€ƒå‹¤ç»Ÿè®¡',
-          left: 'center'
-        },
-        tooltip: {
-          trigger: 'item'
-        },
-        legend: {
-          bottom: '0%',
-          left: 'center'
-        },
-        series: [
-          {
-            name: 'è€ƒå‹¤æƒ…å†µ',
-            type: 'pie',
-            radius: '50%',
-            data: [
-              { value: this.dailyStats.actual_attendance, name: 'å®åˆ°äººæ•°' },
-              { value: this.dailyStats.late_count, name: 'è¿Ÿåˆ°äººæ•°' },
-              { value: this.dailyStats.early_leave_count, name: 'æ—©é€€äººæ•°' },
-              { value: this.dailyStats.normal_count, name: 'æ­£å¸¸äººæ•°' },
-              { value: this.dailyStats.should_attend - this.dailyStats.actual_attendance, name: 'æœªåˆ°äººæ•°' }
-            ],
-            emphasis: {
-              itemStyle: {
-                shadowBlur: 10,
-                shadowOffsetX: 0,
-                shadowColor: 'rgba(0, 0, 0, 0.5)'
-              }
-            }
-          }
-        ]
-      };
-      option && myChart.setOption(option);
-    },
-
-    renderAttendanceCharts() {
-      // æ£€æŸ¥æ•°æ®æ˜¯å¦åŠ è½½å®Œæˆ
-      if (!this.dailyStats) {
-        console.error('dailyStats æ•°æ®æœªåŠ è½½å®Œæˆ');
-        return;
-      }
-
-      // å›¾è¡¨ 1: å®åˆ°äººæ•°å’Œæœªåˆ°äººæ•°
-      const chartDom1 = document.getElementById('attendance-chart-1');
-      if (!chartDom1) {
-        console.error('attendance-chart-1 å®¹å™¨æœªæ‰¾åˆ°');
-        return;
-      }
-      const chart1 = echarts.init(chartDom1);
-      const option1 = {
-        title: {
-          text: 'å®åˆ°äººæ•°ä¸æœªåˆ°äººæ•°',
-          left: 'center'
-        },
-        tooltip: {
-          trigger: 'item'
-        },
-        legend: {
-          bottom: '0%',
-          left: 'center'
-        },
-        series: [
-          {
-            name: 'è€ƒå‹¤æƒ…å†µ',
-            type: 'pie',
-            radius: '50%',
-            data: [
-              { value: this.dailyStats.actual_attendance, name: 'å®åˆ°äººæ•°' },
-              { value: this.dailyStats.should_attend - this.dailyStats.actual_attendance, name: 'æœªåˆ°äººæ•°' }
-            ],
-            emphasis: {
-              itemStyle: {
-                shadowBlur: 10,
-                shadowOffsetX: 0,
-                shadowColor: 'rgba(0, 0, 0, 0.5)'
-              }
-            }
-          }
-        ]
-      };
-      chart1.setOption(option1);
-
-      // å›¾è¡¨ 2: æ­£å¸¸ã€è¿Ÿåˆ°ã€æ—©é€€ã€è¯·å‡äººæ•°
-      const chartDom2 = document.getElementById('attendance-chart-2');
-      if (!chartDom2) {
-        console.error('attendance-chart-2 å®¹å™¨æœªæ‰¾åˆ°');
-        return;
-      }
-      const chart2 = echarts.init(chartDom2);
-      const option2 = {
-        title: {
-          text: 'è€ƒå‹¤è¯¦ç»†ç»Ÿè®¡',
-          left: 'center'
-        },
-        tooltip: {
-          trigger: 'item'
-        },
-        legend: {
-          bottom: '0%',
-          left: 'center'
-        },
-        series: [
-          {
-            name: 'è€ƒå‹¤æƒ…å†µ',
-            type: 'pie',
-            radius: '50%',
-            data: [
-              { value: this.dailyStats.normal_count, name: 'æ­£å¸¸äººæ•°' },
-              { value: this.dailyStats.late_count, name: 'è¿Ÿåˆ°äººæ•°' },
-              { value: this.dailyStats.early_leave_count, name: 'æ—©é€€äººæ•°' },
-              { value: this.dailyStats.leave_count, name: 'è¯·å‡äººæ•°' }
-            ],
-            emphasis: {
-              itemStyle: {
-                shadowBlur: 10,
-                shadowOffsetX: 0,
-                shadowColor: 'rgba(0, 0, 0, 0.5)'
-              }
-            }
-          }
-        ]
-      };
-      chart2.setOption(option2);
-    }
-  },
-  computed: {
-    // æœªå¤„ç†çš„è¯·å‡ç”³è¯·ï¼ˆç›´æ¥è¿”å›åç«¯è¿”å›çš„æ•°æ®ï¼‰
-    filteredUnprocessedLeaves() {
-      return this.adminLeavesUnprocessed;
+      const leaveType = this.leaveTypes.find(t => t.value === type)
+      return leaveType ? leaveType.label : 'æœªçŸ¥ç±»å‹'
     },
-    // å·²å¤„ç†çš„è¯·å‡ç”³è¯·ï¼ˆç›´æ¥è¿”å›åç«¯è¿”å›çš„æ•°æ®ï¼‰
-    filteredProcessedLeaves() {
-      return this.adminLeavesProcessed;
-    },
-    // å·²é€šè¿‡çš„è¯·å‡ç”³è¯·
-    filteredApprovedLeaves() {
-      return this.adminLeavesApproved;
-    },
-    // å·²æ‹’ç»çš„è¯·å‡ç”³è¯·
-    filteredRejectedLeaves() {
-      return this.adminLeavesRejected;
-    }
   }
 }
-
 </script>
 
 <style scoped>
@@ -1875,73 +1149,6 @@ export default {
   cursor: pointer;
 }
 
-/* åˆ†é¡µæ ·å¼ */
-.pagination {
-  margin-top: 12px;
-  /* 15px * 0.8 */
-  display: flex;
-  justify-content: center;
-  align-items: center;
-  gap: 8px;
-  /* 10px * 0.8 */
-}
-
-.pagination-wrapper {
-  display: flex;
-  flex-direction: column;
-  align-items: center;
-  justify-content: center;
-  gap: 16px;
-  /* 20px * 0.8 */
-  margin: 24px 0;
-  /* 30px * 0.8 */
-}
-
-.pagination-controls {
-  display: flex;
-  align-items: center;
-  justify-content: center;
-  gap: 12px;
-  /* 15px * 0.8 */
-}
-
-.pagination-btn {
-  padding: 4.8px 9.6px;
-  /* 6px * 0.8, 12px * 0.8 */
-  background: #3498db;
-  color: white;
-  border: none;
-  border-radius: 4px;
-  cursor: pointer;
-}
-
-.pagination-btn:disabled {
-  background: #ccc;
-  cursor: not-allowed;
-}
-
-.pagination-item {
-  padding: 4.8px 9.6px;
-  /* 6px * 0.8, 12px * 0.8 */
-  cursor: pointer;
-  border-radius: 4px;
-}
-
-.pagination-item:hover {
-  background: #f0f0f0;
-}
-
-.pagination-item.active {
-  background: #3498db;
-  color: white;
-}
-
-.pagination-info {
-  margin-left: 8px;
-  /* 10px * 0.8 */
-  color: #666;
-}
-
 .logout-btn:hover {
   background: #c0392b;
 }
@@ -2175,13 +1382,10 @@ export default {
 }
 
 .leave-submit {
-  padding: 8px 16px;
-  /* 10px * 0.8, 20px * 0.8 */
+  padding: 10px 20px;
   font-size: 14px;
   background: #3498DB;
   color: #fff;
-  margin-top: 8px;
-  /* 10px * 0.8 */
 }
 
 .section-actions {
@@ -2232,28 +1436,6 @@ export default {
   background: #2980b9;
 }
 
-/* æ‰¹é‡å¤„ç†æŒ‰é’®æ ·å¼ */
-.batch-process-btn {
-  background: #3498db;
-  color: white;
-  border: none;
-  padding: 10px 20px;
-  border-radius: 4px;
-  cursor: pointer;
-  font-size: 14px;
-  font-weight: 500;
-  transition: background-color 0.3s;
-}
-
-.batch-process-btn:hover:not(:disabled) {
-  background: #2980b9;
-}
-
-.batch-process-btn:disabled {
-  background: #bdc3c7;
-  cursor: not-allowed;
-}
-
 .records-table .clock-btn,
 .detail-actions .clock-btn {
   padding: 10px 18px;
@@ -2287,15 +1469,12 @@ export default {
 
 .tab-switch {
   display: flex;
-  gap: 9.6px;
-  /* 12px * 0.8 */
-  margin-bottom: 9.6px;
-  /* 12px * 0.8 */
+  gap: 12px;
+  margin-bottom: 12px;
 }
 
 .tab-switch button {
-  padding: 6.4px 9.6px;
-  /* 8px * 0.8, 12px * 0.8 */
+  padding: 8px 12px;
   border: 1px solid #ddd;
   border-radius: 4px;
   background: #fff;
@@ -2307,42 +1486,6 @@ export default {
   color: #fff;
 }
 
-.batch-confirm-area {
-  display: flex;
-  align-items: center;
-  gap: 16px;
-  margin: 16px 0;
-  padding: 12px;
-  background: #f8f9fa;
-  border-radius: 6px;
-  border: 1px solid #e9ecef;
-}
-
-.batch-confirm-btn {
-  padding: 8px 16px;
-  background: #3498db;
-  color: white;
-  border: none;
-  border-radius: 4px;
-  cursor: pointer;
-  font-size: 14px;
-  font-weight: 500;
-}
-
-.batch-confirm-btn:hover:not(:disabled) {
-  background: #2980b9;
-}
-
-.batch-confirm-btn:disabled {
-  background: #bdc3c7;
-  cursor: not-allowed;
-}
-
-.batch-selected-info {
-  color: #666;
-  font-size: 14px;
-}
-
 .detail-actions {
   display: flex;
   gap: 16px;
@@ -2378,55 +1521,6 @@ export default {
   margin-left: 16px;
 }
 
-/* æ‰¹é‡å¤„ç†æŒ‰é’®æ ·å¼ */
-.batch-btn {
-  padding: 6.4px 12.8px;
-  /* 8px * 0.8, 16px * 0.8 */
-  border: none;
-  border-radius: 4px;
-  cursor: pointer;
-  font-weight: 500;
-  margin-left: 8px;
-  /* 10px * 0.8 */
-}
-
-.batch-btn:disabled {
-  cursor: not-allowed;
-  opacity: 0.6;
-}
-
-.batch-approve {
-  background: #28a745;
-  color: white;
-}
-
-.batch-approve:hover:not(:disabled) {
-  background: #218838;
-}
-
-.batch-reject {
-  background: #dc3545;
-  color: white;
-}
-
-.batch-reject:hover:not(:disabled) {
-  background: #c82333;
-}
-
-.batch-processing {
-  background: #6c757d;
-  color: white;
-}
-
-.batch-exit {
-  background: #6c757d;
-  color: white;
-}
-
-.batch-exit:hover:not(:disabled) {
-  background: #5a6268;
-}
-
 /* äººè„¸å½•å…¥æ ·å¼ */
 .face-register-section {
   display: flex;
@@ -2503,63 +1597,96 @@ export default {
   font-size: 14px;
 }
 
-/* è¯·å‡äº‹ç”±åˆ—æ ·å¼ */
-.reason-cell {
+/* äººè„¸å®¡æ ¸ç‰¹å®šæ ·å¼ */
+.face-image-preview {
+  width: 60px;
+  height: 60px;
+  border-radius: 4px;
+  overflow: hidden;
   cursor: pointer;
-  color: #007bff;
+  border: 1px solid #e1e8ed;
 }
 
-.reason-cell:hover {
-  text-decoration: underline;
+.preview-image {
+  width: 100%;
+  height: 100%;
+  object-fit: cover;
+  transition: transform 0.2s;
 }
 
-/* è¯·å‡è¡¨å•æ§ä»¶æ ·å¼ */
-.leave-form input[type="datetime-local"],
-.leave-form textarea,
-.leave-form select {
+.preview-image:hover {
+  transform: scale(1.1);
+}
+
+/* å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡† */
+.image-preview-modal {
+  position: fixed;
+  top: 0;
+  left: 0;
   width: 100%;
-  padding: 4px;
-  margin: 4px 0 8px 0;
-  border: 1px solid #ddd;
-  border-radius: 4px;
-  font-size: 14px;
-  box-sizing: border-box;
-  background-color: #fff;
+  height: 100%;
+  background: rgba(0, 0, 0, 0.8);
+  display: flex;
+  align-items: center;
+  justify-content: center;
+  z-index: 1000;
+}
+
+.modal-content {
+  position: relative;
+  max-width: 90%;
+  max-height: 90%;
 }
 
-.leave-form input[type="datetime-local"]:focus,
-.leave-form textarea:focus,
-.leave-form select:focus {
-  outline: none;
-  border-color: #3498db;
-  box-shadow: 0 0 0 1.92px rgba(52, 152, 219, 0.2);
-  /* 2.4px * 0.8 */
+.modal-content img {
+  max-width: 100%;
+  max-height: 90vh;
+  border-radius: 8px;
 }
 
-.leave-form label {
-  display: block;
-  margin-top: 7.68px;
-  /* 9.6px * 0.8 */
+.close-btn {
+  position: absolute;
+  top: -40px;
+  right: 0;
+  background: none;
+  border: none;
+  color: white;
+  font-size: 30px;
+  cursor: pointer;
+  width: 40px;
+  height: 40px;
+  display: flex;
+  align-items: center;
+  justify-content: center;
+}
+
+/* äººè„¸å®¡æ ¸çŠ¶æ€æ ·å¼ */
+.status-pending {
+  color: #f39c12;
   font-weight: 500;
-  color: #333;
 }
 
-/* ç®¡ç†å‘˜é¡µé¢ç­›é€‰æ§ä»¶æ ·å¼ */
-.filter-controls select {
-  width: 150%;
-  /* å¢åŠ ä¸ºåŸæœ¬çš„1.5å€ */
-  padding: 6.4px;
-  /* 8px * 0.8 */
-  border: 1px solid #ddd;
-  border-radius: 4px;
-  font-size: 14px;
+.status-approved {
+  color: #27ae60;
+  font-weight: 500;
 }
 
-.filter-controls input[type="text"] {
-  padding: 6.4px;
-  /* 8px * 0.8 */
-  border: 1px solid #ddd;
-  border-radius: 4px;
-  font-size: 14px;
+.status-rejected {
+  color: #e74c3c;
+  font-weight: 500;
+}
+
+.empty-state {
+  text-align: center;
+  padding: 40px;
+  color: #7f8c8d;
+  font-style: italic;
+}
+
+.loading-state {
+  text-align: center;
+  padding: 40px;
+  color: #3498db;
+  font-style: italic;
 }
 </style>
\ No newline at end of file